(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,79278,e=>{"use strict";let t=(0,e.i(49623).default)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);e.s(["Loader2",()=>t],79278)},39257,e=>{"use strict";let t=(0,e.i(49623).default)("sparkles",[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]]);e.s(["Sparkles",()=>t],39257)},3812,e=>{"use strict";let t=(0,e.i(49623).default)("message-circle",[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]]);e.s(["MessageCircle",()=>t],3812)},73183,e=>{"use strict";let t=(0,e.i(49623).default)("phone",[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]]);e.s(["Phone",()=>t],73183)},15682,e=>{"use strict";let t=(0,e.i(49623).default)("external-link",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);e.s(["ExternalLink",()=>t],15682)},53154,e=>{"use strict";let t=(0,e.i(49623).default)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);e.s(["ArrowLeft",()=>t],53154)},86098,e=>{"use strict";var t=e.i(80506),s=e.i(778),a=e.i(3812),r=e.i(28781),i=e.i(49623);let l=(0,i.default)("send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);var n=e.i(79278),c=e.i(39257),o=e.i(71628),d=e.i(13862);let h=(0,i.default)("bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);var m=e.i(73183),u=e.i(15682),x=e.i(53154),b=e.i(52236);function p({tenantSlug:e,tenantName:i,whatsappNumber:p,className:g}){let f,[w,j]=(0,s.useState)(!1),[N,v]=(0,s.useState)([]),[y,k]=(0,s.useState)(""),[S,C]=(0,s.useState)(!1),[_,D]=(0,s.useState)(!1),B=(0,s.useRef)(null),$=(0,s.useRef)(null),[M,W]=(0,s.useState)({step:"idle",service:null,date:null,time:null,firstName:"",lastName:"",email:"",phone:""}),[T,z]=(0,s.useState)([]),[A,E]=(0,s.useState)([]),[F,L]=(0,s.useState)(!1);(0,s.useEffect)(()=>{B.current&&(B.current.scrollTop=B.current.scrollHeight)},[N,_,M.step]),(0,s.useEffect)(()=>{w&&$.current&&"idle"===M.step&&setTimeout(()=>$.current?.focus(),300)},[w,M.step]),(0,s.useEffect)(()=>{w&&0===N.length&&v([{id:"welcome",role:"assistant",content:i?`Willkommen bei ${i}! ‚ú®

Ich bin Ihr pers\xf6nlicher Beauty-Berater. Wie kann ich Ihnen heute helfen?`:"Hallo! Ich bin der Esylana-Assistent. Wie kann ich Ihnen helfen?",quickReplies:["Welche Behandlungen bietet ihr an?","Was kostet Botox?","Ich m√∂chte einen Termin buchen","Wer sind eure Spezialisten?"],actionButtons:[{type:"start_booking",label:"Direkt Termin buchen",value:"start"}]}])},[w,N.length,i]);let I=(0,s.useCallback)(async()=>{if(e){L(!0);try{let t=await fetch("/api/chat/booking",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"get_services",tenantSlug:e})}),s=await t.json();E(s.services||[])}catch(e){console.error("Error fetching services:",e)}finally{L(!1)}}},[e]),R=(0,s.useCallback)(async(t,s)=>{if(e){L(!0);try{let a=await fetch("/api/chat/booking",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"get_slots",tenantSlug:e,serviceId:t,date:s})}),r=await a.json();z(r.slots||[])}catch(e){console.error("Error fetching slots:",e)}finally{L(!1)}}},[e]),U=(0,s.useCallback)(async()=>{if(!e||!M.service||!M.date||!M.time)return null;L(!0);try{let t=await fetch("/api/chat/booking",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"create_booking",tenantSlug:e,serviceId:M.service.id,date:M.date,time:M.time,customerData:{firstName:M.firstName,lastName:M.lastName,email:M.email||void 0,phone:M.phone||void 0}})});return await t.json()}catch(e){return console.error("Error creating booking:",e),null}finally{L(!1)}},[e,M]),P=(0,s.useCallback)(()=>{if(!M.service)return"";let e=[`Hallo! Ich m\xf6chte gerne einen Termin buchen:`,"",`üìã Behandlung: ${M.service.name}`,`üí∞ Preis: ${M.service.price}‚Ç¨`,`‚è±Ô∏è Dauer: ${M.service.duration_minutes} Min.`];if(M.date){let t=new Date(M.date).toLocaleDateString("de-DE",{weekday:"long",day:"numeric",month:"long"});e.push(`üìÖ Wunschtermin: ${t}`)}return M.time&&e.push(`üïê Uhrzeit: ${M.time} Uhr`),(M.firstName||M.lastName)&&e.push("",`üë§ Name: ${M.firstName} ${M.lastName}`),M.phone&&e.push(`üìû Telefon: ${M.phone}`),e.push("",`Bitte um Best\xe4tigung. Vielen Dank!`),encodeURIComponent(e.join("\n"))},[M]),q=(0,s.useCallback)(()=>{W(e=>({...e,step:"select_service"})),I();let e={id:`booking-start-${Date.now()}`,role:"assistant",content:"üóìÔ∏è Perfekt! Lassen Sie uns gemeinsam Ihren Termin buchen.\n\nWelche Behandlung m√∂chten Sie?",bookingStep:"select_service"};v(t=>[...t,e])},[I]),O=(0,s.useCallback)(e=>{W(t=>({...t,service:e,step:"select_date"}));let t={id:`service-selected-${Date.now()}`,role:"assistant",content:`‚ú® ${e.name} - ${e.price}‚Ç¨ (${e.duration_minutes} Min.)

Wann m\xf6chten Sie kommen?`,bookingStep:"select_date",selectedService:e};v(e=>[...e,t])},[]),V=(0,s.useCallback)(e=>{W(t=>({...t,date:e,step:"select_time"})),M.service&&R(M.service.id,e);let t=new Date(e).toLocaleDateString("de-DE",{weekday:"long",day:"numeric",month:"long"}),s={id:`date-selected-${Date.now()}`,role:"assistant",content:`üìÖ ${t}

Welche Uhrzeit passt Ihnen?`,bookingStep:"select_time",selectedDate:e};v(e=>[...e,s])},[M.service,R]),K=(0,s.useCallback)(e=>{W(t=>({...t,time:e,step:"enter_contact"}));let t={id:`time-selected-${Date.now()}`,role:"assistant",content:`üïê ${e} Uhr

Fast geschafft! Bitte geben Sie Ihre Kontaktdaten ein:`,bookingStep:"enter_contact",selectedTime:e};v(e=>[...e,t])},[]),Z=(0,s.useCallback)(async()=>{if(!M.firstName||!M.lastName||!M.email&&!M.phone)return;W(e=>({...e,step:"confirm"}));let e=M.date?new Date(M.date):null,t=e?.toLocaleDateString("de-DE",{weekday:"long",day:"numeric",month:"long"}),s={id:`confirm-${Date.now()}`,role:"assistant",content:`üìã Ihre Buchung:

‚ú® ${M.service?.name}
üí∞ ${M.service?.price}‚Ç¨
üìÖ ${t}
üïê ${M.time} Uhr
üë§ ${M.firstName} ${M.lastName}

M\xf6chten Sie die Buchung best\xe4tigen?`,bookingStep:"confirm",actionButtons:[{type:"booking",label:"Jetzt buchen",value:"confirm"},...p?[{type:"whatsapp_booking",label:"Via WhatsApp buchen",value:`https://wa.me/${p.replace(/[^0-9]/g,"")}?text=${P()}`}]:[]]};v(e=>[...e,s])},[M,p,P]),G=(0,s.useCallback)(async()=>{let e=await U();if(e?.success){W(e=>({...e,step:"success"}));let t={id:`success-${Date.now()}`,role:"assistant",content:`üéâ Perfekt! Ihr Termin ist gebucht!

${e.booking.service}
üìÖ ${e.booking.date}
üïê ${e.booking.time} Uhr

Sie erhalten in K\xfcrze eine Best\xe4tigung. Wir freuen uns auf Sie! ‚ú®`,bookingStep:"success",quickReplies:["Weitere Behandlung buchen","Zur√ºck zum Chat"]};v(e=>[...e,t])}else{let e={id:`error-${Date.now()}`,role:"assistant",content:"‚ùå Leider ist ein Fehler aufgetreten. Bitte versuchen Sie es erneut oder kontaktieren Sie uns direkt.",actionButtons:p?[{type:"whatsapp_booking",label:"Via WhatsApp buchen",value:`https://wa.me/${p.replace(/[^0-9]/g,"")}?text=${P()}`}]:[]};v(t=>[...t,e])}},[U,p,P]),J=(0,s.useCallback)(()=>{W({step:"idle",service:null,date:null,time:null,firstName:"",lastName:"",email:"",phone:""}),E([]),z([])},[]),H=(0,s.useCallback)(e=>{"start_booking"===e.type?q():"booking"===e.type&&"confirm"===e.value?G():"whatsapp_booking"===e.type||"whatsapp"===e.type?window.open(e.value,"_blank"):"phone"===e.type||"booking"===e.type?window.location.href=e.value:window.open(e.value,"_blank")},[q,G]),X=async t=>{if(t.preventDefault(),!y.trim()||S)return;let s={id:`user-${Date.now()}`,role:"user",content:y.trim()};v(e=>[...e,s]),k(""),C(!0),D(!0);try{let t=await fetch("/api/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({messages:[...N,s].filter(e=>"welcome"!==e.id).map(e=>({role:e.role,content:e.content})),tenantSlug:e})});if(!t.ok)throw Error("Chat request failed");let a=await t.json();await new Promise(e=>setTimeout(e,500));let r="booking"===a.intent||y.toLowerCase().includes("termin")||y.toLowerCase().includes("buchen"),i={id:`assistant-${Date.now()}`,role:"assistant",content:a.reply,quickReplies:a.quickReplies,actionButtons:[...a.actionButtons||[],...r?[{type:"start_booking",label:"Jetzt hier buchen",value:"start"}]:[]]};v(e=>[...e,i])}catch(t){console.error("Chat error:",t);let e={id:`error-${Date.now()}`,role:"assistant",content:"Entschuldigung, es ist ein Fehler aufgetreten. Bitte versuchen Sie es erneut."};v(t=>[...t,e])}finally{C(!1),D(!1)}};return(0,t.jsxs)("div",{className:(0,b.cn)("fixed bottom-6 right-6 z-50",g),children:[(0,t.jsx)("div",{className:(0,b.cn)("absolute bottom-20 right-0 w-[380px] sm:w-[420px] transition-all duration-300 ease-out origin-bottom-right",w?"opacity-100 scale-100 translate-y-0":"opacity-0 scale-95 translate-y-4 pointer-events-none"),children:(0,t.jsxs)("div",{className:"bg-[#0a0a0a] border border-white/10 rounded-2xl shadow-2xl shadow-black/50 flex flex-col h-[600px] overflow-hidden",children:[(0,t.jsx)("div",{className:"px-5 py-4 border-b border-white/10 bg-gradient-to-r from-amber-500/10 to-transparent",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:["idle"!==M.step&&(0,t.jsx)("button",{onClick:J,className:"w-8 h-8 rounded-full flex items-center justify-center text-white/50 hover:text-white hover:bg-white/10 transition-colors",children:(0,t.jsx)(x.ArrowLeft,{className:"w-4 h-4"})}),(0,t.jsx)("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-amber-400 to-amber-600 flex items-center justify-center",children:(0,t.jsx)(h,{className:"w-5 h-5 text-black"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-medium text-white",children:"idle"!==M.step?"Termin buchen":`${i||"Esylana"} Assistent`}),(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,t.jsx)("span",{className:"w-2 h-2 rounded-full bg-green-500 animate-pulse"}),(0,t.jsx)("span",{className:"text-xs text-white/50",children:"idle"!==M.step?function(e){switch(e){case"select_service":return"Schritt 1/4 - Behandlung";case"select_date":return"Schritt 2/4 - Datum";case"select_time":return"Schritt 3/4 - Uhrzeit";case"enter_contact":return"Schritt 4/4 - Kontakt";case"confirm":return"Best√§tigung";case"success":return"Gebucht!";default:return"Online"}}(M.step):"Online"})]}),"idle"===M.step&&(0,t.jsxs)("div",{className:"flex items-center gap-1 text-xs",title:"Verf√ºgbare Sprachen",children:[(0,t.jsx)("span",{children:"üá©üá™"}),(0,t.jsx)("span",{children:"üá¨üáß"}),(0,t.jsx)("span",{children:"üáπüá∑"}),(0,t.jsx)("span",{children:"üá∑üá∫"})]})]})]})]}),(0,t.jsx)("button",{onClick:()=>j(!1),className:"w-8 h-8 rounded-full flex items-center justify-center text-white/50 hover:text-white hover:bg-white/10 transition-colors",children:(0,t.jsx)(r.X,{className:"w-5 h-5"})})]})}),(0,t.jsxs)("div",{ref:B,className:"flex-1 overflow-y-auto p-4 space-y-4 scroll-smooth",children:[N.map(e=>(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:(0,b.cn)("flex","user"===e.role?"justify-end":"justify-start"),children:["assistant"===e.role&&(0,t.jsx)("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-amber-400 to-amber-600 flex items-center justify-center mr-2 flex-shrink-0",children:(0,t.jsx)(c.Sparkles,{className:"w-4 h-4 text-black"})}),(0,t.jsx)("div",{className:(0,b.cn)("max-w-[80%] rounded-2xl px-4 py-3 text-sm","user"===e.role?"bg-amber-500 text-black rounded-br-md":"bg-white/10 text-white rounded-bl-md"),children:(0,t.jsx)("p",{className:"whitespace-pre-wrap leading-relaxed",children:e.content})})]}),"assistant"===e.role&&e.actionButtons&&e.actionButtons.length>0&&(0,t.jsx)("div",{className:"flex flex-wrap gap-2 ml-10 mt-2",children:e.actionButtons.map((e,s)=>(0,t.jsxs)("button",{onClick:()=>H(e),className:(0,b.cn)("px-4 py-2 text-sm font-medium rounded-lg flex items-center gap-2 transition-all",("booking"===e.type||"start_booking"===e.type)&&"bg-amber-500 text-black hover:bg-amber-400",("whatsapp"===e.type||"whatsapp_booking"===e.type)&&"bg-green-600 text-white hover:bg-green-500","phone"===e.type&&"bg-blue-600 text-white hover:bg-blue-500","link"===e.type&&"bg-white/10 text-white hover:bg-white/20"),children:[("booking"===e.type||"start_booking"===e.type)&&(0,t.jsx)(o.Calendar,{className:"w-4 h-4"}),("whatsapp"===e.type||"whatsapp_booking"===e.type)&&(0,t.jsx)("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"currentColor",children:(0,t.jsx)("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"})}),"phone"===e.type&&(0,t.jsx)(m.Phone,{className:"w-4 h-4"}),"link"===e.type&&(0,t.jsx)(u.ExternalLink,{className:"w-4 h-4"}),e.label]},s))}),"assistant"===e.role&&e.quickReplies&&e.quickReplies.length>0&&"idle"===M.step&&(0,t.jsx)("div",{className:"flex flex-wrap gap-2 ml-10 mt-2",children:e.quickReplies.map((e,s)=>(0,t.jsx)("button",{onClick:()=>(e=>{if("Weitere Behandlung buchen"===e){J(),q();return}"Zur√ºck zum Chat"===e?J():"Ich m√∂chte einen Termin buchen"===e?q():(k(e),setTimeout(()=>{let e=document.getElementById("chat-form");e&&e.requestSubmit()},50))})(e),className:"px-3 py-1.5 text-xs border border-amber-500/30 text-amber-400 rounded-full hover:bg-amber-500/10 hover:border-amber-500/50 transition-colors",children:e},s))})]},e.id)),"select_service"===M.step&&(0,t.jsx)("div",{className:"ml-10 space-y-3",children:F?(0,t.jsxs)("div",{className:"flex items-center gap-2 text-white/50",children:[(0,t.jsx)(n.Loader2,{className:"w-4 h-4 animate-spin"}),(0,t.jsx)("span",{className:"text-sm",children:"Behandlungen werden geladen..."})]}):Object.entries((f={},A.forEach(e=>{let t=e.category||"Weitere";f[t]||(f[t]=[]),f[t].push(e)}),f)).map(([e,s])=>(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("h4",{className:"text-xs uppercase tracking-wide text-amber-400/70",children:e}),(0,t.jsx)("div",{className:"grid gap-2",children:s.slice(0,5).map(e=>(0,t.jsxs)("button",{onClick:()=>O(e),className:"w-full text-left p-3 rounded-xl bg-white/5 border border-white/10 hover:border-amber-500/50 hover:bg-white/10 transition-all group",children:[(0,t.jsxs)("div",{className:"flex justify-between items-start",children:[(0,t.jsx)("span",{className:"text-white text-sm font-medium group-hover:text-amber-400 transition-colors",children:e.name}),(0,t.jsxs)("span",{className:"text-amber-400 text-sm font-semibold",children:[e.price,"‚Ç¨"]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 mt-1 text-white/50 text-xs",children:[(0,t.jsx)(d.Clock,{className:"w-3 h-3"}),(0,t.jsxs)("span",{children:[e.duration_minutes," Min."]})]})]},e.id))})]},e))}),"select_date"===M.step&&(0,t.jsx)("div",{className:"ml-10",children:(0,t.jsx)("div",{className:"grid grid-cols-3 gap-2",children:(()=>{let e=[],t=new Date;for(let s=1;s<=14;s++){let a=new Date(t);a.setDate(t.getDate()+s),0!==a.getDay()&&e.push({value:a.toISOString().split("T")[0],label:a.toLocaleDateString("de-DE",{weekday:"short",day:"numeric",month:"short"})})}return e})().map(e=>(0,t.jsx)("button",{onClick:()=>V(e.value),className:"p-3 rounded-xl bg-white/5 border border-white/10 hover:border-amber-500/50 hover:bg-white/10 transition-all text-center",children:(0,t.jsx)("span",{className:"text-white text-sm",children:e.label})},e.value))})}),"select_time"===M.step&&(0,t.jsx)("div",{className:"ml-10",children:F?(0,t.jsxs)("div",{className:"flex items-center gap-2 text-white/50",children:[(0,t.jsx)(n.Loader2,{className:"w-4 h-4 animate-spin"}),(0,t.jsx)("span",{className:"text-sm",children:"Verf√ºgbare Zeiten werden geladen..."})]}):T.length>0?(0,t.jsx)("div",{className:"grid grid-cols-4 gap-2",children:T.map(e=>(0,t.jsx)("button",{onClick:()=>K(e),className:"p-2 rounded-lg bg-white/5 border border-white/10 hover:border-amber-500/50 hover:bg-white/10 transition-all text-center",children:(0,t.jsx)("span",{className:"text-white text-sm",children:e})},e))}):(0,t.jsxs)("div",{className:"text-white/50 text-sm",children:["Keine freien Termine an diesem Tag. Bitte w√§hlen Sie ein anderes Datum.",(0,t.jsx)("button",{onClick:()=>W(e=>({...e,step:"select_date",date:null})),className:"block mt-2 text-amber-400 hover:underline",children:"‚Üê Anderes Datum w√§hlen"})]})}),"enter_contact"===M.step&&(0,t.jsxs)("div",{className:"ml-10 space-y-3",children:[(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,t.jsx)("input",{type:"text",placeholder:"Vorname *",value:M.firstName,onChange:e=>W(t=>({...t,firstName:e.target.value})),className:"w-full bg-white/5 border border-white/10 rounded-lg px-3 py-2 text-sm text-white placeholder:text-white/30 focus:outline-none focus:border-amber-500/50"}),(0,t.jsx)("input",{type:"text",placeholder:"Nachname *",value:M.lastName,onChange:e=>W(t=>({...t,lastName:e.target.value})),className:"w-full bg-white/5 border border-white/10 rounded-lg px-3 py-2 text-sm text-white placeholder:text-white/30 focus:outline-none focus:border-amber-500/50"})]}),(0,t.jsx)("input",{type:"email",placeholder:"E-Mail",value:M.email,onChange:e=>W(t=>({...t,email:e.target.value})),className:"w-full bg-white/5 border border-white/10 rounded-lg px-3 py-2 text-sm text-white placeholder:text-white/30 focus:outline-none focus:border-amber-500/50"}),(0,t.jsx)("input",{type:"tel",placeholder:"Telefon",value:M.phone,onChange:e=>W(t=>({...t,phone:e.target.value})),className:"w-full bg-white/5 border border-white/10 rounded-lg px-3 py-2 text-sm text-white placeholder:text-white/30 focus:outline-none focus:border-amber-500/50"}),(0,t.jsx)("p",{className:"text-xs text-white/40",children:"* Pflichtfelder. E-Mail oder Telefon erforderlich."}),(0,t.jsx)("button",{onClick:Z,disabled:!M.firstName||!M.lastName||!M.email&&!M.phone,className:"w-full py-3 rounded-lg bg-amber-500 text-black font-medium hover:bg-amber-400 disabled:bg-white/10 disabled:text-white/30 disabled:cursor-not-allowed transition-colors",children:"Weiter zur Best√§tigung"})]}),_&&(0,t.jsxs)("div",{className:"flex justify-start",children:[(0,t.jsx)("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-amber-400 to-amber-600 flex items-center justify-center mr-2 flex-shrink-0",children:(0,t.jsx)(c.Sparkles,{className:"w-4 h-4 text-black"})}),(0,t.jsx)("div",{className:"bg-white/10 rounded-2xl rounded-bl-md px-4 py-3",children:(0,t.jsxs)("div",{className:"flex gap-1",children:[(0,t.jsx)("span",{className:"w-2 h-2 bg-white/50 rounded-full animate-bounce",style:{animationDelay:"0ms"}}),(0,t.jsx)("span",{className:"w-2 h-2 bg-white/50 rounded-full animate-bounce",style:{animationDelay:"150ms"}}),(0,t.jsx)("span",{className:"w-2 h-2 bg-white/50 rounded-full animate-bounce",style:{animationDelay:"300ms"}})]})})]})]}),"idle"===M.step&&(0,t.jsxs)("div",{className:"p-4 border-t border-white/10 bg-white/5",children:[(0,t.jsxs)("form",{id:"chat-form",onSubmit:X,className:"flex gap-3",children:[(0,t.jsx)("input",{ref:$,value:y,onChange:e=>k(e.target.value),placeholder:"Schreiben Sie eine Nachricht...",disabled:S,className:"flex-1 bg-white/5 border border-white/10 rounded-xl px-4 py-3 text-sm text-white placeholder:text-white/30 focus:outline-none focus:border-amber-500/50 focus:ring-1 focus:ring-amber-500/50 disabled:opacity-50 transition-colors"}),(0,t.jsx)("button",{type:"submit",disabled:!y.trim()||S,className:"w-12 h-12 bg-amber-500 hover:bg-amber-400 disabled:bg-white/10 disabled:text-white/30 text-black rounded-xl flex items-center justify-center transition-colors disabled:cursor-not-allowed",children:S?(0,t.jsx)(n.Loader2,{className:"w-5 h-5 animate-spin"}):(0,t.jsx)(l,{className:"w-5 h-5"})})]}),(0,t.jsx)("p",{className:"text-center text-[10px] text-white/30 mt-2",children:"Powered by Esylana AI"})]}),"idle"!==M.step&&"success"!==M.step&&p&&(0,t.jsx)("div",{className:"p-3 border-t border-white/10 bg-white/5",children:(0,t.jsxs)("a",{href:`https://wa.me/${p.replace(/[^0-9]/g,"")}?text=${P()}`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center gap-2 w-full py-2 rounded-lg bg-green-600/20 text-green-400 text-sm hover:bg-green-600/30 transition-colors",children:[(0,t.jsx)("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"currentColor",children:(0,t.jsx)("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"})}),"Lieber per WhatsApp buchen?"]})})]})}),(0,t.jsx)("button",{onClick:()=>j(!w),className:(0,b.cn)("w-14 h-14 rounded-full shadow-lg shadow-black/30 flex items-center justify-center transition-all duration-300","bg-gradient-to-r from-amber-500 to-amber-600 hover:from-amber-400 hover:to-amber-500",w&&"rotate-180"),children:w?(0,t.jsx)(r.X,{className:"w-6 h-6 text-black"}):(0,t.jsx)(a.MessageCircle,{className:"w-6 h-6 text-black"})}),!w&&0===N.length&&(0,t.jsx)("span",{className:"absolute -top-1 -right-1 w-4 h-4 bg-green-500 rounded-full border-2 border-[#0a0a0a] animate-pulse"})]})}e.s(["ChatWidget",()=>p],86098)},69895,e=>{"use strict";let t=(0,e.i(49623).default)("utensils-crossed",[["path",{d:"m16 2-2.3 2.3a3 3 0 0 0 0 4.2l1.8 1.8a3 3 0 0 0 4.2 0L22 8",key:"n7qcjb"}],["path",{d:"M15 15 3.3 3.3a4.2 4.2 0 0 0 0 6l7.3 7.3c.7.7 2 .7 2.8 0L15 15Zm0 0 7 7",key:"d0u48b"}],["path",{d:"m2.1 21.8 6.4-6.3",key:"yn04lh"}],["path",{d:"m19 5-7 7",key:"194lzd"}]]);e.s(["UtensilsCrossed",()=>t],69895)},37570,e=>{"use strict";var t=e.i(80506),s=e.i(778),a=e.i(58294),r=e.i(53154);let i=(0,e.i(49623).default)("arrow-right",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);var l=e.i(71628),n=e.i(13862),c=e.i(99688),o=e.i(67470),d=e.i(39257),h=e.i(54267),m=e.i(79278),u=e.i(66640),u=u,x=e.i(69895),b=e.i(52160);let p=(0,b.createServerReference)("406fa60bec12d89d8022080631ba11caba95d87739",b.callServer,void 0,b.findSourceMapURL,"getAvailableSlots"),g=(0,b.createServerReference)("4034ab78515d89dd8370e54fcbad8cf8c83366bd17",b.callServer,void 0,b.findSourceMapURL,"createPublicBooking"),f=(0,b.createServerReference)("401ab6a9aae66ad3c663d37177a28761a50de910ee",b.callServer,void 0,b.findSourceMapURL,"createGastroReservation"),w=(0,b.createServerReference)("408746f77faeab5a99a1f8e5efe30512a431619bb2",b.callServer,void 0,b.findSourceMapURL,"getGastroSlots");var j=e.i(31016),N=e.i(72200);let v=(0,b.createServerReference)("4096478aff657f5e749248d481ab5e7910203f8bcf",b.callServer,void 0,b.findSourceMapURL,"addToPublicWaitlist");function y({tenantSlug:e,services:a,employees:i,locationId:l,selectedService:c,selectedEmployee:o,onBack:d}){let[h,m]=(0,s.useState)("form"),[u,x]=(0,s.useState)(!1),[b,p]=(0,s.useState)(null),[g,f]=(0,s.useState)(c?.id||""),[w,y]=(0,s.useState)(o?.id||""),[k,S]=(0,s.useState)(""),[C,_]=(0,s.useState)(""),[D,B]=(0,s.useState)(""),[$,M]=(0,s.useState)(""),[W,T]=(0,s.useState)(""),[z,A]=(0,s.useState)(""),[E,F]=(0,s.useState)(""),[L,I]=(0,s.useState)(""),[R,U]=(0,s.useState)(""),P=new Date;P.setDate(P.getDate()+1);let q=P.toISOString().split("T")[0];async function O(t){t.preventDefault(),p(null),x(!0);let s=new FormData;s.set("tenant_slug",e),s.set("service_id",g),s.set("employee_id",w||""),s.set("location_id",l||""),s.set("customer_name",`${k} ${C}`),s.set("customer_email",D),s.set("customer_phone",$),s.set("preferred_date_from",W),s.set("preferred_date_to",z),s.set("preferred_time_from",E),s.set("preferred_time_to",L),s.set("notes",R);let a=await v(s);a.error?p(a.error):m("success"),x(!1)}return"success"===h?(0,t.jsx)("div",{className:"bg-white/5 border border-white/10 rounded-xl",children:(0,t.jsx)("div",{className:"p-6",children:(0,t.jsxs)("div",{className:"text-center py-8",children:[(0,t.jsx)("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full bg-green-500/20 flex items-center justify-center",children:(0,t.jsx)(j.CheckCircle,{className:"w-8 h-8 text-green-400"})}),(0,t.jsx)("h3",{className:"text-xl font-semibold mb-2 text-white",children:"Du stehst jetzt auf der Warteliste!"}),(0,t.jsxs)("p",{className:"text-white/60 mb-6",children:["Wir benachrichtigen dich per ",$?"WhatsApp":"E-Mail",", sobald ein passender Termin frei wird."]}),(0,t.jsx)("button",{onClick:d,className:"px-5 py-3 border border-white/20 rounded-lg text-white/70 hover:text-amber-400 hover:border-amber-500/50 transition-colors",children:"Zur√ºck zur Buchung"})]})})}):(0,t.jsxs)("div",{className:"bg-white/5 border border-white/10 rounded-xl",children:[(0,t.jsx)("div",{className:"p-6 border-b border-white/10",children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"p-2 bg-amber-500/20 rounded-lg",children:(0,t.jsx)(n.Clock,{className:"w-5 h-5 text-amber-400"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-xl font-semibold text-white",children:"Auf die Warteliste setzen"}),(0,t.jsx)("p",{className:"text-white/50",children:"Wir benachrichtigen dich, wenn ein Termin frei wird"})]})]})}),(0,t.jsx)("div",{className:"p-6",children:(0,t.jsxs)("form",{onSubmit:O,className:"space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-sm font-medium text-white",children:"Gew√ºnschte Behandlung *"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsxs)("select",{value:g,onChange:e=>f(e.target.value),required:!0,className:"w-full px-4 py-3 rounded-lg bg-white/5 border border-white/10 text-white appearance-none focus:border-amber-500 focus:ring-1 focus:ring-amber-500 focus:outline-none",children:[(0,t.jsx)("option",{value:"",className:"bg-[#1a1a1a]",children:"Behandlung ausw√§hlen..."}),a.map(e=>(0,t.jsxs)("option",{value:e.id,className:"bg-[#1a1a1a]",children:[e.name," - ",e.price,"‚Ç¨"]},e.id))]}),(0,t.jsx)(N.ChevronDown,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 text-white/50 pointer-events-none"})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-sm font-medium text-white",children:"Bevorzugte/r Mitarbeiter/in"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsxs)("select",{value:w,onChange:e=>y(e.target.value),className:"w-full px-4 py-3 rounded-lg bg-white/5 border border-white/10 text-white appearance-none focus:border-amber-500 focus:ring-1 focus:ring-amber-500 focus:outline-none",children:[(0,t.jsx)("option",{value:"",className:"bg-[#1a1a1a]",children:"Egal"}),i.map(e=>(0,t.jsxs)("option",{value:e.id,className:"bg-[#1a1a1a]",children:[e.first_name," ",e.last_name]},e.id))]}),(0,t.jsx)(N.ChevronDown,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 text-white/50 pointer-events-none"})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{htmlFor:"first_name",className:"text-sm font-medium text-white",children:"Vorname *"}),(0,t.jsx)("input",{id:"first_name",value:k,onChange:e=>S(e.target.value),required:!0,className:"w-full px-4 py-3 rounded-lg bg-white/5 border border-white/10 text-white placeholder:text-white/30 focus:border-amber-500 focus:ring-1 focus:ring-amber-500 focus:outline-none"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{htmlFor:"last_name",className:"text-sm font-medium text-white",children:"Nachname *"}),(0,t.jsx)("input",{id:"last_name",value:C,onChange:e=>_(e.target.value),required:!0,className:"w-full px-4 py-3 rounded-lg bg-white/5 border border-white/10 text-white placeholder:text-white/30 focus:border-amber-500 focus:ring-1 focus:ring-amber-500 focus:outline-none"})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{htmlFor:"email",className:"text-sm font-medium text-white",children:"E-Mail"}),(0,t.jsx)("input",{id:"email",type:"email",value:D,onChange:e=>B(e.target.value),className:"w-full px-4 py-3 rounded-lg bg-white/5 border border-white/10 text-white placeholder:text-white/30 focus:border-amber-500 focus:ring-1 focus:ring-amber-500 focus:outline-none"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{htmlFor:"phone",className:"text-sm font-medium text-white",children:"Telefon (f√ºr WhatsApp) *"}),(0,t.jsx)("input",{id:"phone",type:"tel",value:$,onChange:e=>M(e.target.value),placeholder:"+49...",className:"w-full px-4 py-3 rounded-lg bg-white/5 border border-white/10 text-white placeholder:text-white/30 focus:border-amber-500 focus:ring-1 focus:ring-amber-500 focus:outline-none"})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-sm font-medium text-white",children:"Gew√ºnschter Zeitraum *"}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("label",{htmlFor:"date_from",className:"text-xs text-white/40",children:"Von"}),(0,t.jsx)("input",{id:"date_from",type:"date",value:W,onChange:e=>T(e.target.value),min:q,required:!0,className:"w-full px-4 py-3 rounded-lg bg-white/5 border border-white/10 text-white focus:border-amber-500 focus:ring-1 focus:ring-amber-500 focus:outline-none"})]}),(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("label",{htmlFor:"date_to",className:"text-xs text-white/40",children:"Bis"}),(0,t.jsx)("input",{id:"date_to",type:"date",value:z,onChange:e=>A(e.target.value),min:W||q,required:!0,className:"w-full px-4 py-3 rounded-lg bg-white/5 border border-white/10 text-white focus:border-amber-500 focus:ring-1 focus:ring-amber-500 focus:outline-none"})]})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-sm font-medium text-white",children:"Bevorzugte Uhrzeit (optional)"}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("label",{htmlFor:"time_from",className:"text-xs text-white/40",children:"Von"}),(0,t.jsx)("input",{id:"time_from",type:"time",value:E,onChange:e=>F(e.target.value),className:"w-full px-4 py-3 rounded-lg bg-white/5 border border-white/10 text-white focus:border-amber-500 focus:ring-1 focus:ring-amber-500 focus:outline-none"})]}),(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("label",{htmlFor:"time_to",className:"text-xs text-white/40",children:"Bis"}),(0,t.jsx)("input",{id:"time_to",type:"time",value:L,onChange:e=>I(e.target.value),className:"w-full px-4 py-3 rounded-lg bg-white/5 border border-white/10 text-white focus:border-amber-500 focus:ring-1 focus:ring-amber-500 focus:outline-none"})]})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{htmlFor:"notes",className:"text-sm font-medium text-white",children:"Anmerkungen"}),(0,t.jsx)("textarea",{id:"notes",value:R,onChange:e=>U(e.target.value),placeholder:"z.B. Flexibel bei der Zeit, bevorzugt nachmittags...",rows:2,className:"w-full px-4 py-3 rounded-lg bg-white/5 border border-white/10 text-white placeholder:text-white/30 focus:border-amber-500 focus:ring-1 focus:ring-amber-500 focus:outline-none resize-none"})]}),b&&(0,t.jsx)("p",{className:"text-sm text-red-400 bg-red-500/10 border border-red-500/30 p-3 rounded-lg",children:b}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsxs)("button",{type:"button",onClick:d,className:"flex items-center px-5 py-3 border border-white/20 rounded-lg text-white/70 hover:text-amber-400 hover:border-amber-500/50 transition-colors",children:[(0,t.jsx)(r.ArrowLeft,{className:"w-4 h-4 mr-2"}),"Zur√ºck"]}),(0,t.jsx)("button",{type:"submit",disabled:u,className:"flex-1 px-6 py-3 bg-amber-500 hover:bg-amber-400 text-black font-semibold rounded-lg transition-colors disabled:opacity-50",children:u?"Wird eingetragen...":"Auf Warteliste setzen"})]})]})})]})}function k({tenant:e,services:b,employees:j,locationId:N,customerData:v,businessType:k="beauty_clinic"}){let S=(0,a.useRouter)(),C="gastronomy"===k,[_,D]=(0,s.useState)(C?"guests":"service"),[B,$]=(0,s.useState)(!1),[M,W]=(0,s.useState)(null),[T,z]=(0,s.useState)(2),[A,E]=(0,s.useState)(null),F=Array.from(new Set(b.map(e=>e.category).filter(e=>null!==e&&""!==e))).sort(),L=A?b.filter(e=>e.category===A):b,[I,R]=(0,s.useState)(null),[U,P]=(0,s.useState)(null),[q,O]=(0,s.useState)(""),[V,K]=(0,s.useState)(""),[Z,G]=(0,s.useState)([]),[J,H]=(0,s.useState)(!1),[X,Q]=(0,s.useState)(v?.firstName||""),[Y,ee]=(0,s.useState)(v?.lastName||""),[et,es]=(0,s.useState)(v?.email||""),[ea,er]=(0,s.useState)(v?.phone||""),[ei,el]=(0,s.useState)(""),[en,ec]=(0,s.useState)(!1),[eo,ed]=(0,s.useState)(!1),eh=!!v,em=new Date().toISOString().split("T")[0];(0,s.useEffect)(()=>{q&&(C||I)?(H(!0),K(""),C?w({tenantId:e.id,date:q,guestCount:T}).then(({slots:e,error:t})=>{t?(W(t),G([])):G(e)}).finally(()=>{H(!1)}):p({tenantId:e.id,serviceId:I.id,employeeId:U?.id,date:q}).then(({slots:e,error:t})=>{t?(W(t),G([])):G(e)}).finally(()=>{H(!1)})):G([])},[q,I,U,e.id,C,T]);let eu=C?[{key:"guests",label:"G√§ste"},{key:"datetime",label:"Termin"},{key:"customer",label:"Daten"},{key:"confirm",label:"Best√§tigen"}]:[{key:"service",label:"Service"},{key:"employee",label:"Mitarbeiter"},{key:"datetime",label:"Termin"},{key:"customer",label:"Daten"},{key:"confirm",label:"Best√§tigen"}],ex=eu.findIndex(e=>e.key===_),eb=async()=>{if(!q||!V)return void W("Bitte f√ºlle alle Pflichtfelder aus");if(!C&&!I)return void W("Bitte w√§hle eine Behandlung aus");if($(!0),W(null),C){let t=new FormData;t.set("tenant_slug",e.slug),t.set("reservation_date",q),t.set("reservation_time",V),t.set("guest_count",T.toString()),t.set("first_name",X),t.set("last_name",Y),t.set("email",et),t.set("phone",ea),t.set("notes",ei),N&&t.set("location_id",N);let s=await f(t);if(s.error){W(s.error),$(!1);return}S.push(`/book/${e.slug}/success?token=${s.confirmationToken}&type=reservation`)}else{let t=new FormData;t.set("tenant_slug",e.slug),t.set("service_id",I.id),U&&t.set("employee_id",U.id),N&&t.set("location_id",N),t.set("appointment_date",q),t.set("appointment_time",V),t.set("first_name",X),t.set("last_name",Y),t.set("email",et),t.set("phone",ea),t.set("customer_notes",ei),t.set("marketing_consent",en.toString()),t.set("sms_consent",eo.toString());let s=await g(t);if(s.error){W(s.error),$(!1);return}S.push(`/book/${e.slug}/success?token=${s.confirmationToken}`)}},ep=e=>new Date(e).toLocaleDateString("de-DE",{weekday:"long",day:"numeric",month:"long",year:"numeric"}),eg=t=>new Intl.NumberFormat("de-DE",{style:"currency",currency:e.currency||"EUR"}).format(t);return"waitlist"===_?(0,t.jsx)(y,{tenantSlug:e.slug,services:b,employees:j,locationId:N,selectedService:I,selectedEmployee:U,onBack:()=>D("datetime")}):(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)("div",{className:"flex justify-between mb-8",children:eu.map((e,s)=>(0,t.jsxs)("div",{className:`flex items-center ${s<eu.length-1?"flex-1":""}`,children:[(0,t.jsx)("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium
                ${s<ex||s===ex?"bg-amber-500 text-black":"bg-white/10 text-white/50"}`,children:s<ex?(0,t.jsx)(h.Check,{className:"w-4 h-4"}):s+1}),s<eu.length-1&&(0,t.jsx)("div",{className:`flex-1 h-1 mx-2 rounded ${s<ex?"bg-amber-500":"bg-white/10"}`})]},e.key))}),M&&(0,t.jsx)("div",{className:"p-4 bg-red-500/10 border border-red-500/30 rounded-lg text-red-400 text-sm",children:M}),(0,t.jsxs)("div",{className:"bg-white/5 border border-white/10 rounded-xl",children:[(0,t.jsxs)("div",{className:"p-6 border-b border-white/10",children:[(0,t.jsxs)("h2",{className:"text-xl font-semibold text-white",children:["guests"===_&&"Wie viele G√§ste?","service"===_&&"W√§hle eine Behandlung","employee"===_&&"W√§hle einen Mitarbeiter","datetime"===_&&"W√§hle Datum & Uhrzeit","customer"===_&&"Deine Kontaktdaten","confirm"===_&&"Best√§tigung"]}),(0,t.jsxs)("p",{className:"text-white/60 mt-1",children:["guests"===_&&"F√ºr wie viele Personen m√∂chtest du reservieren?","service"===_&&"Welche Behandlung m√∂chtest du buchen?","employee"===_&&"Optional: W√§hle deinen Wunsch-Mitarbeiter","datetime"===_&&"Wann passt es dir am besten?","customer"===_&&"Wir ben√∂tigen deine Kontaktdaten f√ºr die Best√§tigung","confirm"===_&&(C?"√úberpr√ºfe deine Reservierung":"√úberpr√ºfe deine Buchung")]})]}),(0,t.jsxs)("div",{className:"p-6",children:["guests"===_&&(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-center gap-6",children:[(0,t.jsx)("button",{type:"button",onClick:()=>z(Math.max(1,T-1)),disabled:T<=1,className:"w-14 h-14 rounded-full bg-white/10 border border-white/20 text-white text-2xl font-light hover:bg-white/20 hover:border-amber-500/50 transition-all disabled:opacity-30 disabled:cursor-not-allowed",children:"‚àí"}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"text-5xl font-light text-amber-400",children:T}),(0,t.jsx)("div",{className:"text-white/50 text-sm mt-1",children:1===T?"Person":"Personen"})]}),(0,t.jsx)("button",{type:"button",onClick:()=>z(Math.min(20,T+1)),disabled:T>=20,className:"w-14 h-14 rounded-full bg-white/10 border border-white/20 text-white text-2xl font-light hover:bg-white/20 hover:border-amber-500/50 transition-all disabled:opacity-30 disabled:cursor-not-allowed",children:"+"})]}),(0,t.jsx)("div",{className:"flex flex-wrap justify-center gap-2 pt-4 border-t border-white/10",children:[2,4,6,8,10].map(e=>(0,t.jsxs)("button",{type:"button",onClick:()=>z(e),className:`px-4 py-2 rounded-full text-sm font-medium transition-all ${T===e?"bg-amber-500 text-black":"bg-white/10 text-white/60 hover:bg-white/20"}`,children:[e," Personen"]},e))}),T>=8&&(0,t.jsxs)("p",{className:"text-center text-amber-400 text-sm bg-amber-500/10 border border-amber-500/30 p-3 rounded-lg",children:[(0,t.jsx)(x.UtensilsCrossed,{className:"w-4 h-4 inline mr-2"}),"F√ºr gr√∂√üere Gruppen empfehlen wir eine telefonische Reservierung"]})]}),"service"===_&&(0,t.jsxs)("div",{className:"space-y-4",children:[F.length>0&&(0,t.jsxs)("div",{className:"flex flex-wrap gap-2 pb-4 border-b border-white/10",children:[(0,t.jsx)("button",{type:"button",onClick:()=>E(null),className:`px-4 py-2 rounded-full text-sm font-medium transition-all ${null===A?"bg-amber-500 text-black":"bg-white/10 text-white/60 hover:bg-white/20"}`,children:"Alle"}),F.map(e=>(0,t.jsx)("button",{type:"button",onClick:()=>E(e),className:`px-4 py-2 rounded-full text-sm font-medium transition-all ${A===e?"bg-amber-500 text-black":"bg-white/10 text-white/60 hover:bg-white/20"}`,children:e},e))]}),(0,t.jsx)("div",{className:"grid gap-3",children:0===L.length?(0,t.jsx)("p",{className:"text-white/50 text-center py-8",children:"Keine Services verf√ºgbar"}):L.map(e=>(0,t.jsx)("button",{type:"button",onClick:()=>R(e),className:`p-4 rounded-lg border text-left transition-all ${I?.id===e.id?"border-amber-500 bg-amber-500/10 ring-2 ring-amber-500/30":"border-white/10 hover:border-amber-500/50 bg-white/5"}`,children:(0,t.jsxs)("div",{className:"flex justify-between items-start",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-medium text-white",children:e.name}),e.description&&(0,t.jsx)("p",{className:"text-sm text-white/50 mt-1",children:e.description}),(0,t.jsxs)("p",{className:"text-sm text-white/50 mt-2",children:[(0,t.jsx)(n.Clock,{className:"w-3 h-3 inline mr-1"}),e.duration_minutes," Minuten"]})]}),(0,t.jsx)("span",{className:"font-semibold text-amber-400",children:eg(e.price)})]})},e.id))})]}),"employee"===_&&(0,t.jsxs)("div",{className:"grid gap-3",children:[(0,t.jsx)("button",{type:"button",onClick:()=>P(null),className:`p-4 rounded-lg border text-left transition-all ${null===U?"border-amber-500 bg-amber-500/10 ring-2 ring-amber-500/30":"border-white/10 hover:border-amber-500/50 bg-white/5"}`,children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"w-10 h-10 rounded-full bg-white/10 flex items-center justify-center",children:(0,t.jsx)(d.Sparkles,{className:"w-5 h-5 text-white/50"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-medium text-white",children:"Egal / N√§chster Verf√ºgbarer"}),(0,t.jsx)("p",{className:"text-sm text-white/50",children:"Wir w√§hlen automatisch einen verf√ºgbaren Mitarbeiter"})]})]})}),j.map(e=>(0,t.jsx)("button",{type:"button",onClick:()=>P(e),className:`p-4 rounded-lg border text-left transition-all ${U?.id===e.id?"border-amber-500 bg-amber-500/10 ring-2 ring-amber-500/30":"border-white/10 hover:border-amber-500/50 bg-white/5"}`,children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"w-10 h-10 rounded-full bg-amber-500/20 flex items-center justify-center",children:(0,t.jsx)(c.User,{className:"w-5 h-5 text-amber-400"})}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("h3",{className:"font-medium text-white",children:[e.first_name," ",e.last_name]}),e.role&&(0,t.jsx)("p",{className:"text-sm text-white/50 capitalize",children:e.role}),e.specialties?.length>0&&(0,t.jsx)("p",{className:"text-xs text-white/40 mt-1",children:e.specialties.join(", ")})]})]})},e.id))]}),"datetime"===_&&(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("label",{htmlFor:"date",className:"text-sm font-medium text-white flex items-center",children:[(0,t.jsx)(l.Calendar,{className:"w-4 h-4 inline mr-2 text-amber-400"}),"Datum"]}),(0,t.jsx)("input",{id:"date",type:"date",min:em,value:q,onChange:e=>O(e.target.value),className:"w-full px-4 py-3 rounded-lg bg-white/5 border border-white/10 text-white focus:border-amber-500 focus:ring-1 focus:ring-amber-500 focus:outline-none"})]}),q&&(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("label",{className:"text-sm font-medium text-white flex items-center",children:[(0,t.jsx)(n.Clock,{className:"w-4 h-4 inline mr-2 text-amber-400"}),"Uhrzeit"]}),J?(0,t.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,t.jsx)(m.Loader2,{className:"w-6 h-6 animate-spin text-amber-400"})}):0===Z.length?(0,t.jsxs)("div",{className:"text-center py-8 space-y-4",children:[(0,t.jsx)("p",{className:"text-white/50",children:"Keine verf√ºgbaren Zeiten an diesem Tag"}),(0,t.jsxs)("button",{type:"button",onClick:()=>D("waitlist"),className:"mx-auto px-4 py-2 border border-white/20 rounded-lg text-white/70 hover:text-amber-400 hover:border-amber-500/50 transition-colors flex items-center",children:[(0,t.jsx)(u.default,{className:"w-4 h-4 mr-2"}),"Auf Warteliste setzen"]})]}):(0,t.jsx)("div",{className:"grid grid-cols-4 gap-2",children:Z.map(e=>(0,t.jsx)("button",{type:"button",onClick:()=>K(e),className:`p-2 rounded-lg border text-sm font-medium transition-all ${V===e?"border-amber-500 bg-amber-500 text-black":"border-white/10 text-white/70 hover:border-amber-500/50 bg-white/5"}`,children:e},e))})]})]}),"customer"===_&&(0,t.jsxs)("div",{className:"space-y-4",children:[eh&&(0,t.jsx)("div",{className:"p-3 bg-green-500/10 border border-green-500/30 rounded-lg",children:(0,t.jsxs)("p",{className:"text-sm text-green-400",children:[(0,t.jsx)(h.Check,{className:"w-4 h-4 inline mr-2"}),"Deine Daten wurden automatisch ausgef√ºllt"]})}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{htmlFor:"firstName",className:"text-sm font-medium text-white",children:"Vorname *"}),(0,t.jsx)("input",{id:"firstName",value:X,onChange:e=>Q(e.target.value),placeholder:"Max",required:!0,className:"w-full px-4 py-3 rounded-lg bg-white/5 border border-white/10 text-white placeholder:text-white/30 focus:border-amber-500 focus:ring-1 focus:ring-amber-500 focus:outline-none"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{htmlFor:"lastName",className:"text-sm font-medium text-white",children:"Nachname *"}),(0,t.jsx)("input",{id:"lastName",value:Y,onChange:e=>ee(e.target.value),placeholder:"Mustermann",required:!0,className:"w-full px-4 py-3 rounded-lg bg-white/5 border border-white/10 text-white placeholder:text-white/30 focus:border-amber-500 focus:ring-1 focus:ring-amber-500 focus:outline-none"})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{htmlFor:"email",className:"text-sm font-medium text-white",children:"Email"}),(0,t.jsx)("input",{id:"email",type:"email",value:et,onChange:e=>es(e.target.value),placeholder:"max@beispiel.de",disabled:eh,className:"w-full px-4 py-3 rounded-lg bg-white/5 border border-white/10 text-white placeholder:text-white/30 focus:border-amber-500 focus:ring-1 focus:ring-amber-500 focus:outline-none disabled:opacity-50"}),(0,t.jsx)("p",{className:"text-xs text-white/40",children:"F√ºr die Terminbest√§tigung per Email"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{htmlFor:"phone",className:"text-sm font-medium text-white",children:"Telefon / WhatsApp"}),(0,t.jsx)("input",{id:"phone",type:"tel",value:ea,onChange:e=>er(e.target.value),placeholder:"+49 123 456789",className:"w-full px-4 py-3 rounded-lg bg-white/5 border border-white/10 text-white placeholder:text-white/30 focus:border-amber-500 focus:ring-1 focus:ring-amber-500 focus:outline-none"}),(0,t.jsx)("p",{className:"text-xs text-white/40",children:"F√ºr die Terminbest√§tigung per WhatsApp"})]}),!et&&!ea&&(0,t.jsx)("p",{className:"text-sm text-amber-400 bg-amber-500/10 border border-amber-500/30 p-3 rounded-lg",children:"Bitte gib mindestens eine Email-Adresse oder Telefonnummer an"}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{htmlFor:"notes",className:"text-sm font-medium text-white",children:"Anmerkungen (optional)"}),(0,t.jsx)("textarea",{id:"notes",value:ei,onChange:e=>el(e.target.value),placeholder:"Besondere W√ºnsche oder Hinweise...",className:"flex min-h-[80px] w-full rounded-lg bg-white/5 border border-white/10 px-4 py-3 text-sm text-white placeholder:text-white/30 focus:border-amber-500 focus:ring-1 focus:ring-amber-500 focus:outline-none"})]}),(0,t.jsxs)("div",{className:"space-y-3 pt-4 border-t border-white/10",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsx)("input",{type:"checkbox",id:"smsConsent",checked:eo,onChange:e=>ed(e.target.checked),className:"w-4 h-4 rounded border-white/20 bg-white/5 text-amber-500 focus:ring-amber-500 focus:ring-offset-0"}),(0,t.jsx)("label",{htmlFor:"smsConsent",className:"text-sm text-white/70",children:"Ich m√∂chte Terminerinnerungen per SMS/WhatsApp erhalten"})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsx)("input",{type:"checkbox",id:"marketingConsent",checked:en,onChange:e=>ec(e.target.checked),className:"w-4 h-4 rounded border-white/20 bg-white/5 text-amber-500 focus:ring-amber-500 focus:ring-offset-0"}),(0,t.jsx)("label",{htmlFor:"marketingConsent",className:"text-sm text-white/70",children:"Ich m√∂chte √ºber Angebote und Neuigkeiten informiert werden"})]})]})]}),"confirm"===_&&(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("div",{className:"p-4 bg-white/5 border border-white/10 rounded-lg space-y-3",children:C?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-white/50",children:"Anzahl G√§ste"}),(0,t.jsxs)("span",{className:"font-medium text-white flex items-center",children:[(0,t.jsx)(o.Users,{className:"w-4 h-4 mr-2 text-amber-400"}),T," ",1===T?"Person":"Personen"]})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-white/50",children:"Datum"}),(0,t.jsx)("span",{className:"text-white",children:ep(q)})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-white/50",children:"Uhrzeit"}),(0,t.jsxs)("span",{className:"text-white",children:[V," Uhr"]})]})]}):I&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-white/50",children:"Behandlung"}),(0,t.jsx)("span",{className:"font-medium text-white",children:I.name})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-white/50",children:"Dauer"}),(0,t.jsxs)("span",{className:"text-white",children:[I.duration_minutes," Minuten"]})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-white/50",children:"Mitarbeiter"}),(0,t.jsx)("span",{className:"text-white",children:U?`${U.first_name} ${U.last_name}`:"N√§chster Verf√ºgbarer"})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-white/50",children:"Datum"}),(0,t.jsx)("span",{className:"text-white",children:ep(q)})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-white/50",children:"Uhrzeit"}),(0,t.jsxs)("span",{className:"text-white",children:[V," Uhr"]})]}),(0,t.jsxs)("div",{className:"flex justify-between pt-3 border-t border-white/10",children:[(0,t.jsx)("span",{className:"font-medium text-white",children:"Preis"}),(0,t.jsx)("span",{className:"font-bold text-amber-400",children:eg(I.price)})]})]})}),(0,t.jsxs)("div",{className:"p-4 bg-white/5 border border-white/10 rounded-lg space-y-2",children:[(0,t.jsx)("h4",{className:"font-medium text-white",children:"Deine Daten"}),(0,t.jsxs)("p",{className:"text-white",children:[X," ",Y]}),et&&(0,t.jsx)("p",{className:"text-sm text-white/50",children:et}),ea&&(0,t.jsx)("p",{className:"text-sm text-white/50",children:ea}),ei&&(0,t.jsxs)("p",{className:"text-sm text-white/50 mt-2",children:["Anmerkungen: ",ei]})]}),(0,t.jsxs)("p",{className:"text-sm text-white/50",children:["Nach der ",C?"Reservierung":"Buchung"," erh√§ltst du eine Best√§tigung per"," ",et&&ea?"Email und WhatsApp":et?"Email":"WhatsApp","."]})]})]})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsxs)("button",{type:"button",onClick:()=>{let e=ex-1;e>=0&&(D(eu[e].key),W(null))},disabled:0===ex,className:"flex items-center px-5 py-3 border border-white/20 rounded-lg text-white/70 hover:text-amber-400 hover:border-amber-500/50 transition-colors disabled:opacity-30 disabled:cursor-not-allowed",children:[(0,t.jsx)(r.ArrowLeft,{className:"w-4 h-4 mr-2"}),"Zur√ºck"]}),"confirm"===_?(0,t.jsx)("button",{type:"button",onClick:eb,disabled:B,className:"flex items-center px-6 py-3 bg-amber-500 hover:bg-amber-400 text-black font-semibold rounded-lg transition-colors disabled:opacity-50",children:B?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(m.Loader2,{className:"w-4 h-4 mr-2 animate-spin"}),C?"Wird reserviert...":"Wird gebucht..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(h.Check,{className:"w-4 h-4 mr-2"}),C?"Jetzt reservieren":"Jetzt buchen"]})}):(0,t.jsxs)("button",{type:"button",onClick:()=>{let e=ex+1;e<eu.length&&(D(eu[e].key),W(null))},disabled:!(()=>{switch(_){case"guests":return T>=1&&T<=20;case"service":return null!==I;case"employee":case"confirm":return!0;case"datetime":return q&&V;case"customer":return X&&Y&&(et||ea);default:return!1}})(),className:"flex items-center px-6 py-3 bg-amber-500 hover:bg-amber-400 text-black font-semibold rounded-lg transition-colors disabled:opacity-30 disabled:cursor-not-allowed",children:["Weiter",(0,t.jsx)(i,{className:"w-4 h-4 ml-2"})]})]})]})}e.s(["BookingForm",()=>k],37570)}]);