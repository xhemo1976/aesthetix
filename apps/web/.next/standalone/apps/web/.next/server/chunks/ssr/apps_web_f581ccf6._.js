module.exports=[81032,a=>{"use strict";var b=a.i(38735),c=a.i(56511),d=a.i(80159),e=a.i(81182);async function f(){let a=await (0,d.createClient)(),{data:b,error:c}=await a.from("customers").select("*").order("created_at",{ascending:!1});return c?(console.error("Error fetching customers:",c),{customers:[],error:c.message}):{customers:b,error:null}}async function g(a){let b=await (0,d.createClient)(),f=(0,e.createAdminClient)(),{data:{user:g}}=await b.auth.getUser();if(!g)return{error:"Nicht authentifiziert"};let{data:h}=await f.from("users").select("tenant_id").eq("id",g.id).single();if(!h)return{error:"Profil nicht gefunden"};let i=a.get("first_name"),j=a.get("last_name"),k=a.get("email"),l=a.get("phone"),m=a.get("date_of_birth"),n=a.get("notes"),{error:o}=await b.from("customers").insert({tenant_id:h.tenant_id,first_name:i,last_name:j,email:k||null,phone:l||null,date_of_birth:m||null,notes:n||null});return o?(console.error("Error creating customer:",o),{error:o.message}):((0,c.revalidatePath)("/dashboard/customers"),{error:null})}async function h(a,b){let e=await (0,d.createClient)(),f=b.get("first_name"),g=b.get("last_name"),h=b.get("email"),i=b.get("phone"),j=b.get("date_of_birth"),k=b.get("notes"),{error:l}=await e.from("customers").update({first_name:f,last_name:g,email:h||null,phone:i||null,date_of_birth:j||null,notes:k||null}).eq("id",a);return l?(console.error("Error updating customer:",l),{error:l.message}):((0,c.revalidatePath)("/dashboard/customers"),{error:null})}async function i(a){let b=await (0,d.createClient)(),{error:e}=await b.from("customers").delete().eq("id",a);return e?(console.error("Error deleting customer:",e),{error:e.message}):((0,c.revalidatePath)("/dashboard/customers"),{error:null})}async function j(a){let b=await (0,d.createClient)(),{data:c,error:e}=await b.from("customers").select("*").eq("id",a).single();return e?(console.error("Error fetching customer:",e),{customer:null,error:e.message}):{customer:c,error:null}}async function k(a){let b=await (0,d.createClient)(),{data:c,error:e}=await b.from("appointments").select(`
      id,
      start_time,
      end_time,
      status,
      price,
      customer_notes,
      staff_notes,
      services (
        id,
        name,
        duration_minutes
      ),
      employees (
        id,
        first_name,
        last_name
      )
    `).eq("customer_id",a).order("start_time",{ascending:!1});return e?(console.error("Error fetching customer appointments:",e),{appointments:[],error:e.message}):{appointments:c||[],error:null}}async function l(a){let b=await (0,d.createClient)(),{data:c,error:e}=await b.from("appointments").select("status, price").eq("customer_id",a);if(e)return console.error("Error fetching customer stats:",e),{stats:null,error:e.message};let f=c?.filter(a=>"completed"===a.status)||[],g=c?.length||0,h=f.reduce((a,b)=>a+(b.price||0),0),i=c?.filter(a=>"canceled"===a.status).length||0,j=c?.filter(a=>"no_show"===a.status).length||0;return{stats:{totalAppointments:g,completedAppointments:f.length,canceledAppointments:i,noShowAppointments:j,totalSpent:h},error:null}}async function m(a,b,e){let f=await (0,d.createClient)(),{error:g}=await f.from("customers").update({notes:b,medical_notes:e}).eq("id",a);return g?(console.error("Error updating customer notes:",g),{error:g.message}):((0,c.revalidatePath)(`/dashboard/customers/${a}`),{error:null})}async function n(a,b){let e=await (0,d.createClient)(),{error:f}=await e.from("appointments").update({staff_notes:b}).eq("id",a);return f?(console.error("Error updating appointment notes:",f),{error:f.message}):((0,c.revalidatePath)("/dashboard/customers"),{error:null})}(0,a.i(98246).ensureServerEntryExports)([f,g,h,i,j,k,l,m,n]),(0,b.registerServerReference)(f,"0012f034365b466b68faf986a4afe957bff0eb83a1",null),(0,b.registerServerReference)(g,"400d346cab7161c17ec93d5519b52beca6ecac9269",null),(0,b.registerServerReference)(h,"60cdf908f1b0690e1642847a4cb020fde78f95ad2f",null),(0,b.registerServerReference)(i,"40c79fe125d7170d0b436107d1bde5b3b4e18b25be",null),(0,b.registerServerReference)(j,"4099f22a0b2ee55dee09b996db562a5dc53e70d768",null),(0,b.registerServerReference)(k,"402d4e400989e2c0d06ef868649fd9b933ed170464",null),(0,b.registerServerReference)(l,"40bbaf84ed7728bb863828c5d4c38a963fa07777c9",null),(0,b.registerServerReference)(m,"701e6f343c3a139d8a96c97361c4a30c15bc2d25b9",null),(0,b.registerServerReference)(n,"60000f278c7756b8a4b5c23d534c1552ce41a65fb2",null),a.s(["createCustomer",()=>g,"deleteCustomer",()=>i,"getCustomerAppointments",()=>k,"getCustomerById",()=>j,"getCustomerStats",()=>l,"getCustomers",()=>f,"updateAppointmentNotes",()=>n,"updateCustomer",()=>h,"updateCustomerNotes",()=>m])},39123,a=>{"use strict";var b=a.i(38735),c=a.i(56511),d=a.i(80159),e=a.i(81182);async function f(){let a=await (0,d.createClient)(),b=(0,e.createAdminClient)(),{data:{user:c}}=await a.auth.getUser();if(!c)return{settings:null,error:"Nicht authentifiziert"};let{data:f}=await b.from("users").select("tenant_id").eq("id",c.id).single();if(!f)return{settings:null,error:"Profil nicht gefunden"};let{data:g,error:h}=await a.from("tenants").select("*").eq("id",f.tenant_id).single();return h?(console.error("Error fetching tenant:",h),{settings:null,error:h.message}):{settings:g,error:null}}async function g(a){let b=await (0,d.createClient)(),f=(0,e.createAdminClient)(),{data:{user:g}}=await b.auth.getUser();if(!g)return{error:"Nicht authentifiziert"};let{data:h}=await f.from("users").select("tenant_id").eq("id",g.id).single();if(!h)return{error:"Profil nicht gefunden"};let i=a.get("name"),j=a.get("contact_phone"),k=a.get("contact_email"),l=a.get("whatsapp_number"),m=a.get("address"),n=a.get("city"),o=a.get("postal_code"),{error:p}=await b.from("tenants").update({name:i,contact_phone:j||null,contact_email:k||null,whatsapp_number:l||null,address:m||null,city:n||null,postal_code:o||null}).eq("id",h.tenant_id);return p?(console.error("Error updating tenant:",p),{error:p.message}):((0,c.revalidatePath)("/dashboard/settings"),(0,c.revalidatePath)("/dashboard"),{error:null})}(0,a.i(98246).ensureServerEntryExports)([f,g]),(0,b.registerServerReference)(f,"000394212ee760024230aaabf0277c0143a4959c7b",null),(0,b.registerServerReference)(g,"408713dad5b69ddff4146ae0627d12db9f67ec8232",null),a.s(["getTenantSettings",()=>f,"updateTenantSettings",()=>g])},2096,a=>{"use strict";var b=a.i(76392),c=a.i(81032),d=a.i(39123);a.s([],65318),a.i(65318),a.s(["000394212ee760024230aaabf0277c0143a4959c7b",()=>d.getTenantSettings,"0012f034365b466b68faf986a4afe957bff0eb83a1",()=>c.getCustomers,"00ea5d6db9aa78d155ad7148c00d987a78197cad0e",()=>b.logout,"400d346cab7161c17ec93d5519b52beca6ecac9269",()=>c.createCustomer,"402d4e400989e2c0d06ef868649fd9b933ed170464",()=>c.getCustomerAppointments,"40557600bffd5a2c9eccc9fb8b66b41ea0de68fa87",()=>b.login,"408713dad5b69ddff4146ae0627d12db9f67ec8232",()=>d.updateTenantSettings,"4099f22a0b2ee55dee09b996db562a5dc53e70d768",()=>c.getCustomerById,"40bbaf84ed7728bb863828c5d4c38a963fa07777c9",()=>c.getCustomerStats,"40c79fe125d7170d0b436107d1bde5b3b4e18b25be",()=>c.deleteCustomer,"40edf544285d63aedbf98dd3fd472b99b616040b0a",()=>b.signup,"60000f278c7756b8a4b5c23d534c1552ce41a65fb2",()=>c.updateAppointmentNotes,"60cdf908f1b0690e1642847a4cb020fde78f95ad2f",()=>c.updateCustomer,"701e6f343c3a139d8a96c97361c4a30c15bc2d25b9",()=>c.updateCustomerNotes],2096)}];

//# sourceMappingURL=apps_web_f581ccf6._.js.map