module.exports=[81032,a=>{"use strict";var b=a.i(38735),c=a.i(56511),d=a.i(80159),e=a.i(81182);async function f(){let a=await (0,d.createClient)(),{data:b,error:c}=await a.from("customers").select("*").order("created_at",{ascending:!1});return c?(console.error("Error fetching customers:",c),{customers:[],error:c.message}):{customers:b,error:null}}async function g(a){let b=await (0,d.createClient)(),f=(0,e.createAdminClient)(),{data:{user:g}}=await b.auth.getUser();if(!g)return{error:"Nicht authentifiziert"};let{data:h}=await f.from("users").select("tenant_id").eq("id",g.id).single();if(!h)return{error:"Profil nicht gefunden"};let i=a.get("first_name"),j=a.get("last_name"),k=a.get("email"),l=a.get("phone"),m=a.get("date_of_birth"),n=a.get("notes"),{error:o}=await b.from("customers").insert({tenant_id:h.tenant_id,first_name:i,last_name:j,email:k||null,phone:l||null,date_of_birth:m||null,notes:n||null});return o?(console.error("Error creating customer:",o),{error:o.message}):((0,c.revalidatePath)("/dashboard/customers"),{error:null})}async function h(a,b){let e=await (0,d.createClient)(),f=b.get("first_name"),g=b.get("last_name"),h=b.get("email"),i=b.get("phone"),j=b.get("date_of_birth"),k=b.get("notes"),{error:l}=await e.from("customers").update({first_name:f,last_name:g,email:h||null,phone:i||null,date_of_birth:j||null,notes:k||null}).eq("id",a);return l?(console.error("Error updating customer:",l),{error:l.message}):((0,c.revalidatePath)("/dashboard/customers"),{error:null})}async function i(a){let b=await (0,d.createClient)(),{error:e}=await b.from("customers").delete().eq("id",a);return e?(console.error("Error deleting customer:",e),{error:e.message}):((0,c.revalidatePath)("/dashboard/customers"),{error:null})}async function j(a){let b=await (0,d.createClient)(),{data:c,error:e}=await b.from("customers").select("*").eq("id",a).single();return e?(console.error("Error fetching customer:",e),{customer:null,error:e.message}):{customer:c,error:null}}async function k(a){let b=await (0,d.createClient)(),{data:c,error:e}=await b.from("appointments").select(`
      id,
      start_time,
      end_time,
      status,
      price,
      customer_notes,
      staff_notes,
      services (
        id,
        name,
        duration_minutes
      ),
      employees (
        id,
        first_name,
        last_name
      )
    `).eq("customer_id",a).order("start_time",{ascending:!1});return e?(console.error("Error fetching customer appointments:",e),{appointments:[],error:e.message}):{appointments:c||[],error:null}}async function l(a){let b=await (0,d.createClient)(),{data:c,error:e}=await b.from("appointments").select("status, price").eq("customer_id",a);if(e)return console.error("Error fetching customer stats:",e),{stats:null,error:e.message};let f=c?.filter(a=>"completed"===a.status)||[],g=c?.length||0,h=f.reduce((a,b)=>a+(b.price||0),0),i=c?.filter(a=>"canceled"===a.status).length||0,j=c?.filter(a=>"no_show"===a.status).length||0;return{stats:{totalAppointments:g,completedAppointments:f.length,canceledAppointments:i,noShowAppointments:j,totalSpent:h},error:null}}async function m(a,b,e){let f=await (0,d.createClient)(),{error:g}=await f.from("customers").update({notes:b,medical_notes:e}).eq("id",a);return g?(console.error("Error updating customer notes:",g),{error:g.message}):((0,c.revalidatePath)(`/dashboard/customers/${a}`),{error:null})}async function n(a,b){let e=await (0,d.createClient)(),{error:f}=await e.from("appointments").update({staff_notes:b}).eq("id",a);return f?(console.error("Error updating appointment notes:",f),{error:f.message}):((0,c.revalidatePath)("/dashboard/customers"),{error:null})}(0,a.i(98246).ensureServerEntryExports)([f,g,h,i,j,k,l,m,n]),(0,b.registerServerReference)(f,"0012f034365b466b68faf986a4afe957bff0eb83a1",null),(0,b.registerServerReference)(g,"400d346cab7161c17ec93d5519b52beca6ecac9269",null),(0,b.registerServerReference)(h,"60cdf908f1b0690e1642847a4cb020fde78f95ad2f",null),(0,b.registerServerReference)(i,"40c79fe125d7170d0b436107d1bde5b3b4e18b25be",null),(0,b.registerServerReference)(j,"4099f22a0b2ee55dee09b996db562a5dc53e70d768",null),(0,b.registerServerReference)(k,"402d4e400989e2c0d06ef868649fd9b933ed170464",null),(0,b.registerServerReference)(l,"40bbaf84ed7728bb863828c5d4c38a963fa07777c9",null),(0,b.registerServerReference)(m,"701e6f343c3a139d8a96c97361c4a30c15bc2d25b9",null),(0,b.registerServerReference)(n,"60000f278c7756b8a4b5c23d534c1552ce41a65fb2",null),a.s(["createCustomer",()=>g,"deleteCustomer",()=>i,"getCustomerAppointments",()=>k,"getCustomerById",()=>j,"getCustomerStats",()=>l,"getCustomers",()=>f,"updateAppointmentNotes",()=>n,"updateCustomer",()=>h,"updateCustomerNotes",()=>m])},39123,a=>{"use strict";var b=a.i(38735),c=a.i(56511),d=a.i(80159),e=a.i(81182);async function f(){let a=await (0,d.createClient)(),b=(0,e.createAdminClient)(),{data:{user:c}}=await a.auth.getUser();if(!c)return{settings:null,error:"Nicht authentifiziert"};let{data:f}=await b.from("users").select("tenant_id").eq("id",c.id).single();if(!f)return{settings:null,error:"Profil nicht gefunden"};let{data:g,error:h}=await a.from("tenants").select("*").eq("id",f.tenant_id).single();return h?(console.error("Error fetching tenant:",h),{settings:null,error:h.message}):{settings:g,error:null}}async function g(a){let b=await (0,d.createClient)(),f=(0,e.createAdminClient)(),{data:{user:g}}=await b.auth.getUser();if(!g)return{error:"Nicht authentifiziert"};let{data:h}=await f.from("users").select("tenant_id").eq("id",g.id).single();if(!h)return{error:"Profil nicht gefunden"};let i=a.get("name"),j=a.get("contact_phone"),k=a.get("contact_email"),l=a.get("whatsapp_number"),m=a.get("address"),n=a.get("city"),o=a.get("postal_code"),{error:p}=await b.from("tenants").update({name:i,contact_phone:j||null,contact_email:k||null,whatsapp_number:l||null,address:m||null,city:n||null,postal_code:o||null}).eq("id",h.tenant_id);return p?(console.error("Error updating tenant:",p),{error:p.message}):((0,c.revalidatePath)("/dashboard/settings"),(0,c.revalidatePath)("/dashboard"),{error:null})}(0,a.i(98246).ensureServerEntryExports)([f,g]),(0,b.registerServerReference)(f,"000394212ee760024230aaabf0277c0143a4959c7b",null),(0,b.registerServerReference)(g,"408713dad5b69ddff4146ae0627d12db9f67ec8232",null),a.s(["getTenantSettings",()=>f,"updateTenantSettings",()=>g])},99159,a=>{"use strict";function b(a,b){let c=a.replace(/[\s\-\(\)]/g,""),d=encodeURIComponent(b);return`https://wa.me/${c}?text=${d}`}function c(a){let b=`Hallo ${a.customerName}! ðŸ‘‹

Termin-Best\xe4tigung bei ${a.clinicName}:

ðŸ“… Datum: ${a.date}
ðŸ• Uhrzeit: ${a.time}
ðŸ’† Behandlung: ${a.serviceName}`;return a.confirmationUrl?`${b}

ðŸ”— Bitte best\xe4tigen Sie Ihren Termin:
${a.confirmationUrl}

Wir freuen uns auf Sie!`:`${b}

Bis bald!`}function d(a){return`Hallo ${a.customerName}! ðŸ‘‹

Gute Nachrichten von ${a.clinicName}! ðŸŽ‰

Ein Termin ist frei geworden f\xfcr Ihre gew\xfcnschte Behandlung:

ðŸ’† ${a.serviceName}
ðŸ“… ${a.date}
ðŸ• ${a.time}

Buchen Sie jetzt, bevor der Termin vergeben ist:
ðŸ”— ${a.bookingUrl}

Bei Fragen melden Sie sich gerne!`}a.s(["generateWhatsAppLink",()=>b,"getAppointmentConfirmationMessage",()=>c,"getWaitlistNotificationMessage",()=>d])},28713,a=>{"use strict";var b=a.i(38735),c=a.i(56511),d=a.i(80159),e=a.i(81182),f=a.i(99159);async function g(a){let b=(await (0,d.createClient)()).from("waitlist").select(`
      *,
      services (name, duration_minutes),
      employees (first_name, last_name),
      locations (name)
    `).order("priority",{ascending:!1}).order("created_at",{ascending:!0});a&&(b=b.eq("status",a));let{data:c,error:e}=await b;return e?(console.error("Error fetching waitlist:",e),{entries:[],error:e.message}):{entries:c||[],error:null}}async function h(a,b,c,e){let f=(await (0,d.createClient)()).from("waitlist").select(`
      *,
      services (name, duration_minutes),
      employees (first_name, last_name)
    `).eq("service_id",a).eq("status","waiting").lte("preferred_date_from",b).gte("preferred_date_to",b).order("priority",{ascending:!1}).order("created_at",{ascending:!0});c&&(f=f.or(`employee_id.eq.${c},employee_id.is.null`)),e&&(f=f.or(`location_id.eq.${e},location_id.is.null`));let{data:g,error:h}=await f;return h?(console.error("Error fetching waitlist for service:",h),{entries:[],error:h.message}):{entries:g||[],error:null}}async function i(a){let b=await (0,d.createClient)(),f=(0,e.createAdminClient)(),{data:{user:g}}=await b.auth.getUser();if(!g)return{error:"Nicht authentifiziert"};let{data:h}=await f.from("users").select("tenant_id").eq("id",g.id).single();if(!h)return{error:"Profil nicht gefunden"};let i=a.get("service_id"),j=a.get("employee_id"),k=a.get("location_id"),l=a.get("customer_id"),m=a.get("customer_name"),n=a.get("customer_email"),o=a.get("customer_phone"),p=a.get("preferred_date_from"),q=a.get("preferred_date_to"),r=a.get("preferred_time_from"),s=a.get("preferred_time_to"),t=a.get("notes"),u=parseInt(a.get("priority"))||0;if(!i||!m||!p||!q)return{error:"Bitte fÃ¼lle alle Pflichtfelder aus"};if(!n&&!o)return{error:"E-Mail oder Telefonnummer erforderlich"};let{error:v}=await b.from("waitlist").insert({tenant_id:h.tenant_id,service_id:i,employee_id:j||null,location_id:k||null,customer_id:l||null,customer_name:m,customer_email:n||null,customer_phone:o||null,preferred_date_from:p,preferred_date_to:q,preferred_time_from:r||null,preferred_time_to:s||null,notes:t||null,priority:u,status:"waiting"});return v?(console.error("Error adding to waitlist:",v),{error:v.message}):((0,c.revalidatePath)("/dashboard/waitlist"),{error:null})}async function j(a){let b=(0,e.createAdminClient)(),c=a.get("tenant_slug"),d=a.get("service_id"),f=a.get("employee_id"),g=a.get("location_id"),h=a.get("customer_name"),i=a.get("customer_email"),j=a.get("customer_phone"),k=a.get("preferred_date_from"),l=a.get("preferred_date_to"),m=a.get("preferred_time_from"),n=a.get("preferred_time_to"),o=a.get("notes");if(!c||!d||!h||!k||!l)return{error:"Bitte fÃ¼lle alle Pflichtfelder aus"};if(!i&&!j)return{error:"E-Mail oder Telefonnummer erforderlich"};let{data:p}=await b.from("tenants").select("id").eq("slug",c).single();if(!p)return{error:"Klinik nicht gefunden"};let q=null;if(i){let{data:a}=await b.from("customers").select("id").eq("tenant_id",p.id).eq("email",i).single();q=a?.id||null}let{error:r}=await b.from("waitlist").insert({tenant_id:p.id,service_id:d,employee_id:f||null,location_id:g||null,customer_id:q,customer_name:h,customer_email:i||null,customer_phone:j||null,preferred_date_from:k,preferred_date_to:l,preferred_time_from:m||null,preferred_time_to:n||null,notes:o||null,priority:0,status:"waiting"});return r?(console.error("Error adding to public waitlist:",r),{error:r.message}):{error:null,success:!0}}async function k(a,b){let e=await (0,d.createClient)(),f={status:b};if("notified"===b){f.notified_at=new Date().toISOString();let{data:b}=await e.from("waitlist").select("notification_count").eq("id",a).single();f.notification_count=(b?.notification_count||0)+1}let{error:g}=await e.from("waitlist").update(f).eq("id",a);return g?(console.error("Error updating waitlist status:",g),{error:g.message}):((0,c.revalidatePath)("/dashboard/waitlist"),{error:null})}async function l(a){let b=await (0,d.createClient)(),{error:e}=await b.from("waitlist").delete().eq("id",a);return e?(console.error("Error deleting waitlist entry:",e),{error:e.message}):((0,c.revalidatePath)("/dashboard/waitlist"),{error:null})}async function m(a,b,c,e){let g=await (0,d.createClient)(),{data:h}=await g.from("waitlist").select(`
      *,
      services (name)
    `).eq("id",a).single();if(!h||!h.customer_phone)return{link:null,error:"Kein Telefon hinterlegt"};let i=Array.isArray(h.services)?h.services[0]:h.services,j=(0,f.getWaitlistNotificationMessage)({customerName:h.customer_name,serviceName:i?.name||"Ihr gewÃ¼nschter Service",date:b.date,time:b.time,clinicName:c,bookingUrl:e}),l=h.customer_phone.replace(/\s/g,"");l.startsWith("0")&&(l="49"+l.substring(1)),l.startsWith("+")||(l="+"+l);let m=`https://wa.me/${l.replace("+","")}?text=${encodeURIComponent(j)}`;return await k(a,"notified"),{link:m,error:null}}async function n(a,b,c,d,f,g){let h=(0,e.createAdminClient)().from("waitlist").select(`
      *,
      services (name, duration_minutes),
      employees (first_name, last_name)
    `).eq("tenant_id",a).eq("service_id",b).eq("status","waiting").lte("preferred_date_from",c).gte("preferred_date_to",c).order("priority",{ascending:!1}).order("created_at",{ascending:!0}).limit(5),{data:i,error:j}=await h;if(j)return console.error("Error finding waitlist matches:",j),{matches:[],error:j.message};let k=parseInt(d.replace(":",""));return{matches:(i||[]).filter(a=>{if(!a.preferred_time_from&&!a.preferred_time_to)return!0;let b=a.preferred_time_from?parseInt(a.preferred_time_from.replace(":","")):0,c=a.preferred_time_to?parseInt(a.preferred_time_to.replace(":","")):2359;return k>=b&&k<=c}).filter(a=>!a.employee_id||a.employee_id===f),error:null}}async function o(){let a=await (0,d.createClient)(),{count:b,error:c}=await a.from("waitlist").select("*",{count:"exact",head:!0}).eq("status","waiting");return c?(console.error("Error getting waitlist count:",c),{count:0,error:c.message}):{count:b||0,error:null}}(0,a.i(98246).ensureServerEntryExports)([g,h,i,j,k,l,m,n,o]),(0,b.registerServerReference)(g,"40f47cca60b822c173ca3a9376d99c0f2febad6cf3",null),(0,b.registerServerReference)(h,"78537af8d77deb5511bb1607b32f482e3f85326f7a",null),(0,b.registerServerReference)(i,"40459a667babdea845a7b9c41877fa4d7bb220e7cc",null),(0,b.registerServerReference)(j,"4096478aff657f5e749248d481ab5e7910203f8bcf",null),(0,b.registerServerReference)(k,"605b34cbe125981b9dc140e20e7debf77f5cd0f0a1",null),(0,b.registerServerReference)(l,"40785ea3e95e0c80b7932a6bb3c9395bdbb4e5da10",null),(0,b.registerServerReference)(m,"78c14a82da1c94ebb00627c84372bc25ec8b0f1a0d",null),(0,b.registerServerReference)(n,"7ef1eb754f580e1c4b0ad8650dfa537df6aab2ef70",null),(0,b.registerServerReference)(o,"00847b3161eaf3ed7ad9de464cc6f55943d410553c",null),a.s(["addToPublicWaitlist",()=>j,"addToWaitlist",()=>i,"deleteWaitlistEntry",()=>l,"findWaitlistMatchesForCancellation",()=>n,"getWaitlist",()=>g,"getWaitlistCount",()=>o,"getWaitlistForService",()=>h,"getWaitlistNotificationLink",()=>m,"updateWaitlistStatus",()=>k])},69381,a=>{"use strict";var b=a.i(76392),c=a.i(28713),d=a.i(71118),e=a.i(81032),f=a.i(93452),g=a.i(39123);a.s([],25184),a.i(25184),a.s(["000394212ee760024230aaabf0277c0143a4959c7b",()=>g.getTenantSettings,"0012f034365b466b68faf986a4afe957bff0eb83a1",()=>e.getCustomers,"0042a2abe349a413d4622436da0130103736329c4f",()=>d.exportServices,"005d4a16cc3f1c9d6de42a96aa62f2bab538afa94b",()=>d.getServices,"00847b3161eaf3ed7ad9de464cc6f55943d410553c",()=>c.getWaitlistCount,"0093e37328b590a65f8d37e8ce9fa05c903d1afef9",()=>f.getEmployees,"00bca40b9c27440715c941e69fbf2f341e7b2dda70",()=>f.getActiveEmployees,"00ea5d6db9aa78d155ad7148c00d987a78197cad0e",()=>b.logout,"400d346cab7161c17ec93d5519b52beca6ecac9269",()=>e.createCustomer,"402cd21ffb7a3c56b09af06fb4c5043b38c5a55190",()=>d.createService,"402d4e400989e2c0d06ef868649fd9b933ed170464",()=>e.getCustomerAppointments,"4031f14c1707f0e37da0005df8fa8ab36c1a3f5935",()=>d.uploadServiceImage,"403436518ac5fdd91354ed91d48edcf3a3c5db3175",()=>f.createEmployee,"4034854ccfb5932e3e079d755981213270ff1a89c6",()=>f.uploadEmployeeImage,"40459a667babdea845a7b9c41877fa4d7bb220e7cc",()=>c.addToWaitlist,"40557600bffd5a2c9eccc9fb8b66b41ea0de68fa87",()=>b.login,"4072eae6cf452ff8a263c5ef9e89fb633185d5b94d",()=>d.deleteService,"40785ea3e95e0c80b7932a6bb3c9395bdbb4e5da10",()=>c.deleteWaitlistEntry,"408713dad5b69ddff4146ae0627d12db9f67ec8232",()=>g.updateTenantSettings,"4096478aff657f5e749248d481ab5e7910203f8bcf",()=>c.addToPublicWaitlist,"4099f22a0b2ee55dee09b996db562a5dc53e70d768",()=>e.getCustomerById,"40a31f38d9ffa3be3e030d3686f3cc427ead83e6d7",()=>d.importServices,"40bbaf84ed7728bb863828c5d4c38a963fa07777c9",()=>e.getCustomerStats,"40c664ac32d3e5bdf26b6e9a0eb615d306433dcb5f",()=>f.deleteEmployee,"40c79fe125d7170d0b436107d1bde5b3b4e18b25be",()=>e.deleteCustomer,"40edf544285d63aedbf98dd3fd472b99b616040b0a",()=>b.signup,"40f47cca60b822c173ca3a9376d99c0f2febad6cf3",()=>c.getWaitlist,"40fb98609ed453fa86f0d09f3d89f9effabb985abc",()=>f.deleteEmployeeImage,"60000f278c7756b8a4b5c23d534c1552ce41a65fb2",()=>e.updateAppointmentNotes,"6020af006a3b69df729950905fd13bb582e96bc819",()=>f.updateEmployee,"605b34cbe125981b9dc140e20e7debf77f5cd0f0a1",()=>c.updateWaitlistStatus,"608de8ff0a4bdc697186ecb3f9f725e339083da387",()=>d.updateService,"60cdf908f1b0690e1642847a4cb020fde78f95ad2f",()=>e.updateCustomer,"60e0e2c66009f6838a672eccb9b91822df45af2e93",()=>d.toggleServiceStatus,"701e6f343c3a139d8a96c97361c4a30c15bc2d25b9",()=>e.updateCustomerNotes,"70fbf593b00f45ddaaf89fb3bd6e42222afbc2a28e",()=>f.getEmployeeStats,"78537af8d77deb5511bb1607b32f482e3f85326f7a",()=>c.getWaitlistForService,"78c14a82da1c94ebb00627c84372bc25ec8b0f1a0d",()=>c.getWaitlistNotificationLink,"7ef1eb754f580e1c4b0ad8650dfa537df6aab2ef70",()=>c.findWaitlistMatchesForCancellation],69381)}];

//# sourceMappingURL=apps_web_e84b8e52._.js.map