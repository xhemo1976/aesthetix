(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,26398,e=>{"use strict";var t=e.i(80506),r=e.i(778),n=e.i(58294),l=e.i(66691),s=e.i(70317),a=e.i(33);let i=(0,e.i(49623).default)("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);var o=e.i(86914),d=e.i(71628),c=e.i(67470),u=e.i(99688),m=e.i(13862),h=e.i(94709);let g={scheduled:"bg-blue-100 border-blue-300 text-blue-800 hover:bg-blue-200",confirmed:"bg-green-100 border-green-300 text-green-800 hover:bg-green-200",completed:"bg-gray-100 border-gray-300 text-gray-800 hover:bg-gray-200",cancelled:"bg-red-100 border-red-300 text-red-800 hover:bg-red-200",no_show:"bg-orange-100 border-orange-300 text-orange-800 hover:bg-orange-200"};function p({appointments:e,currentDate:r,onAppointmentClick:n}){let l=e.filter(e=>{let t=new Date(e.start_time);return t.getDate()===r.getDate()&&t.getMonth()===r.getMonth()&&t.getFullYear()===r.getFullYear()}).sort((e,t)=>new Date(e.start_time).getTime()-new Date(t.start_time).getTime()),a=Array.from({length:13},(e,t)=>t+8),i=e=>e.toLocaleTimeString("de-DE",{hour:"2-digit",minute:"2-digit"}),o=[];for(let e=0;e<l.length;e++){let t=l[e],r=new Date(t.start_time).getTime(),n=new Date(t.end_time).getTime(),s=l.filter((t,l)=>{if(e===l)return!1;let s=new Date(t.start_time).getTime();return r<new Date(t.end_time).getTime()&&n>s}),a=0,i=new Set;for(s.forEach(t=>{let r=l.indexOf(t);if(r<e){let e=o[r]?.column??0;i.add(e)}});i.has(a);)a++;let d=Math.max(s.length+1,1);o.push({...t,column:a,totalColumns:d})}return(0,t.jsx)(s.Card,{children:(0,t.jsx)(s.CardContent,{className:"p-0",children:0===l.length?(0,t.jsxs)("div",{className:"py-12 text-center text-muted-foreground",children:[(0,t.jsx)(m.Clock,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),(0,t.jsx)("p",{children:"Keine Termine für diesen Tag"})]}):(0,t.jsx)("div",{className:"relative",children:(0,t.jsxs)("div",{className:"flex",children:[(0,t.jsx)("div",{className:"w-20 flex-shrink-0 border-r",children:a.map(e=>(0,t.jsxs)("div",{className:"h-20 border-b px-2 py-1 text-xs text-muted-foreground",children:[e,":00"]},e))}),(0,t.jsxs)("div",{className:"flex-1 relative",style:{minHeight:`${80*a.length}px`},children:[a.map((e,r)=>(0,t.jsx)("div",{className:"absolute w-full border-b",style:{top:`${80*r}px`,height:"80px"}},e)),o.map(e=>{var r,l;let s,a,o,d=100/e.totalColumns,c=e.column/e.totalColumns*100;return(0,t.jsxs)("div",{onClick:()=>n?.(e),className:`absolute rounded-lg border-l-4 p-2 shadow-sm cursor-pointer transition-all overflow-visible ${g[e.status]||g.scheduled}`,style:{top:`${(a=(s=new Date(e.start_time)).getHours(),((a-8)*60+s.getMinutes())/60*80)}px`,minHeight:`${Math.max((r=e.start_time,l=e.end_time,o=new Date(r),(new Date(l).getTime()-o.getTime())/1e3/60/60*80),80)}px`,left:`calc(${c}% + 8px)`,width:`calc(${d}% - 16px)`},children:[(0,t.jsxs)("div",{className:"font-semibold text-sm flex items-center gap-1",children:[(0,t.jsx)(m.Clock,{className:"w-3 h-3"}),i(new Date(e.start_time))," - ",i(new Date(e.end_time))]}),(0,t.jsxs)("div",{className:"flex items-center gap-1 mt-1",children:[(0,t.jsx)(u.User,{className:"w-3 h-3"}),(0,t.jsxs)("span",{className:"text-sm",children:[e.customers.first_name," ",e.customers.last_name]})]}),(0,t.jsx)("div",{className:"text-xs mt-1 opacity-75",children:e.services.name}),e.employees&&(0,t.jsxs)("div",{className:"flex items-center gap-1 mt-1 text-xs opacity-75",children:[(0,t.jsx)(h.UserCircle,{className:"w-3 h-3"}),e.employees.first_name," ",e.employees.last_name]}),"confirmed"===e.customer_response&&(0,t.jsx)("div",{className:"text-xs mt-1 font-semibold",children:"✓ Bestätigt"})]},e.id)})]})]})})})})}let x={scheduled:"bg-blue-500 hover:bg-blue-600",confirmed:"bg-green-500 hover:bg-green-600",completed:"bg-gray-500 hover:bg-gray-600",cancelled:"bg-red-500 hover:bg-red-600",no_show:"bg-orange-500 hover:bg-orange-600"};function f({appointments:e,currentDate:r,onAppointmentClick:n}){let l=new Date(r),a=l.getDay(),i=l.getDate()-a+(0===a?-6:1);l.setDate(i),l.setHours(0,0,0,0);let o=Array.from({length:7},(e,t)=>{let r=new Date(l);return r.setDate(l.getDate()+t),r});return(0,t.jsx)(s.Card,{children:(0,t.jsx)(s.CardContent,{className:"p-0",children:(0,t.jsx)("div",{className:"grid grid-cols-7 divide-x",children:o.map((r,l)=>{let s,a=e.filter(e=>{let t=new Date(e.start_time);return t.getDate()===r.getDate()&&t.getMonth()===r.getMonth()&&t.getFullYear()===r.getFullYear()}).sort((e,t)=>new Date(e.start_time).getTime()-new Date(t.start_time).getTime()),i=(s=new Date,r.getDate()===s.getDate()&&r.getMonth()===s.getMonth()&&r.getFullYear()===s.getFullYear());return(0,t.jsxs)("div",{className:`min-h-[500px] ${i?"bg-primary/5":""}`,children:[(0,t.jsxs)("div",{className:`p-3 border-b text-center ${i?"bg-primary text-primary-foreground":"bg-muted/50"}`,children:[(0,t.jsx)("div",{className:"text-xs font-medium",children:r.toLocaleDateString("de-DE",{weekday:"short"})}),(0,t.jsx)("div",{className:`text-lg font-bold ${i?"":"text-muted-foreground"}`,children:r.getDate()})]}),(0,t.jsx)("div",{className:"p-2 space-y-1",children:0===a.length?(0,t.jsx)("div",{className:"text-center py-8 text-xs text-muted-foreground",children:"Keine Termine"}):a.map(e=>(0,t.jsxs)("div",{onClick:()=>n?.(e),className:`p-2 rounded text-xs text-white cursor-pointer transition-colors ${x[e.status]||x.scheduled}`,children:[(0,t.jsxs)("div",{className:"font-semibold flex items-center gap-1",children:[(0,t.jsx)(m.Clock,{className:"w-3 h-3"}),new Date(e.start_time).toLocaleTimeString("de-DE",{hour:"2-digit",minute:"2-digit"})]}),(0,t.jsxs)("div",{className:"truncate mt-1",children:[e.customers.first_name," ",e.customers.last_name]}),(0,t.jsx)("div",{className:"truncate opacity-90",children:e.services.name}),e.employees&&(0,t.jsxs)("div",{className:"truncate flex items-center gap-1 opacity-90",children:[(0,t.jsx)(h.UserCircle,{className:"w-3 h-3"}),e.employees.first_name," ",e.employees.last_name]}),"confirmed"===e.customer_response&&(0,t.jsx)("div",{className:"mt-1 text-[10px]",children:"✓ Bestätigt"})]},e.id))})]},l)})})})})}let v={scheduled:"bg-blue-500",confirmed:"bg-green-500",completed:"bg-gray-500",cancelled:"bg-red-500",no_show:"bg-orange-500"};function w({appointments:e,currentDate:r}){let n=r.getFullYear(),l=r.getMonth(),a=new Date(n,l,1),i=new Date(n,l+1,0),o=a.getDay()-1;-1===o&&(o=6);let d=i.getDate(),c=7*Math.ceil((d+o)/7),u=[];for(let e=0;e<c;e++)e<o||e>=o+d?u.push(null):u.push(new Date(n,l,e-o+1));return(0,t.jsx)(s.Card,{children:(0,t.jsx)(s.CardContent,{className:"p-0",children:(0,t.jsxs)("div",{className:"grid grid-cols-7",children:[["Mo","Di","Mi","Do","Fr","Sa","So"].map(e=>(0,t.jsx)("div",{className:"p-3 text-center font-semibold border-b bg-muted/50 text-sm",children:e},e)),u.map((r,n)=>{let l=r?e.filter(e=>{let t=new Date(e.start_time);return t.getDate()===r.getDate()&&t.getMonth()===r.getMonth()&&t.getFullYear()===r.getFullYear()}):[],s=(e=>{if(!e)return!1;let t=new Date;return e.getDate()===t.getDate()&&e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear()})(r);return(0,t.jsx)("div",{className:`min-h-[100px] border-r border-b p-2 ${r?s?"bg-primary/10":"hover:bg-muted/30":"bg-muted/10"}`,children:r&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:`text-sm font-semibold mb-1 ${s?"text-primary":"text-muted-foreground"}`,children:r.getDate()}),(0,t.jsxs)("div",{className:"space-y-0.5",children:[l.slice(0,3).map(e=>(0,t.jsx)("div",{className:`h-1.5 rounded-full ${v[e.status]||v.scheduled} ${"confirmed"===e.customer_response?"ring-2 ring-green-300":""}`,title:`${e.status}${"confirmed"===e.customer_response?" - Bestätigt":""}`},e.id)),l.length>3&&(0,t.jsxs)("div",{className:"text-[10px] text-muted-foreground",children:["+",l.length-3," weitere"]})]}),l.length>0&&(0,t.jsxs)("div",{className:"text-[10px] text-muted-foreground mt-1",children:[l.length," Termin",1!==l.length?"e":""]})]})},n)})]})})})}var b=e.i(56872),j=e.i(53747),y=e.i(56207),D=e.i(44977),N=e.i(52960),C=e.i(70460),S=e.i(27864),_=e.i(27069),T=e.i(91967),E="ScrollArea",[R,P]=(0,y.createContextScope)(E),[k,L]=R(E),A=r.forwardRef((e,n)=>{let{__scopeScrollArea:l,type:s="hover",dir:a,scrollHideDelay:i=600,...o}=e,[d,c]=r.useState(null),[u,m]=r.useState(null),[h,g]=r.useState(null),[p,x]=r.useState(null),[f,v]=r.useState(null),[w,j]=r.useState(0),[y,N]=r.useState(0),[S,_]=r.useState(!1),[T,E]=r.useState(!1),R=(0,D.useComposedRefs)(n,e=>c(e)),P=(0,C.useDirection)(a);return(0,t.jsx)(k,{scope:l,type:s,dir:P,scrollHideDelay:i,scrollArea:d,viewport:u,onViewportChange:m,content:h,onContentChange:g,scrollbarX:p,onScrollbarXChange:x,scrollbarXEnabled:S,onScrollbarXEnabledChange:_,scrollbarY:f,onScrollbarYChange:v,scrollbarYEnabled:T,onScrollbarYEnabledChange:E,onCornerWidthChange:j,onCornerHeightChange:N,children:(0,t.jsx)(b.Primitive.div,{dir:P,...o,ref:R,style:{position:"relative","--radix-scroll-area-corner-width":w+"px","--radix-scroll-area-corner-height":y+"px",...e.style}})})});A.displayName=E;var M="ScrollAreaViewport",$=r.forwardRef((e,n)=>{let{__scopeScrollArea:l,children:s,nonce:a,...i}=e,o=L(M,l),d=r.useRef(null),c=(0,D.useComposedRefs)(n,d,o.onViewportChange);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:a}),(0,t.jsx)(b.Primitive.div,{"data-radix-scroll-area-viewport":"",...i,ref:c,style:{overflowX:o.scrollbarXEnabled?"scroll":"hidden",overflowY:o.scrollbarYEnabled?"scroll":"hidden",...e.style},children:(0,t.jsx)("div",{ref:o.onContentChange,style:{minWidth:"100%",display:"table"},children:s})})]})});$.displayName=M;var H="ScrollAreaScrollbar",z=r.forwardRef((e,n)=>{let{forceMount:l,...s}=e,a=L(H,e.__scopeScrollArea),{onScrollbarXEnabledChange:i,onScrollbarYEnabledChange:o}=a,d="horizontal"===e.orientation;return r.useEffect(()=>(d?i(!0):o(!0),()=>{d?i(!1):o(!1)}),[d,i,o]),"hover"===a.type?(0,t.jsx)(Y,{...s,ref:n,forceMount:l}):"scroll"===a.type?(0,t.jsx)(F,{...s,ref:n,forceMount:l}):"auto"===a.type?(0,t.jsx)(U,{...s,ref:n,forceMount:l}):"always"===a.type?(0,t.jsx)(I,{...s,ref:n}):null});z.displayName=H;var Y=r.forwardRef((e,n)=>{let{forceMount:l,...s}=e,a=L(H,e.__scopeScrollArea),[i,o]=r.useState(!1);return r.useEffect(()=>{let e=a.scrollArea,t=0;if(e){let r=()=>{window.clearTimeout(t),o(!0)},n=()=>{t=window.setTimeout(()=>o(!1),a.scrollHideDelay)};return e.addEventListener("pointerenter",r),e.addEventListener("pointerleave",n),()=>{window.clearTimeout(t),e.removeEventListener("pointerenter",r),e.removeEventListener("pointerleave",n)}}},[a.scrollArea,a.scrollHideDelay]),(0,t.jsx)(j.Presence,{present:l||i,children:(0,t.jsx)(U,{"data-state":i?"visible":"hidden",...s,ref:n})})}),F=r.forwardRef((e,n)=>{var l;let{forceMount:s,...a}=e,i=L(H,e.__scopeScrollArea),o="horizontal"===e.orientation,d=ea(()=>u("SCROLL_END"),100),[c,u]=(l={hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}},r.useReducer((e,t)=>l[e][t]??e,"hidden"));return r.useEffect(()=>{if("idle"===c){let e=window.setTimeout(()=>u("HIDE"),i.scrollHideDelay);return()=>window.clearTimeout(e)}},[c,i.scrollHideDelay,u]),r.useEffect(()=>{let e=i.viewport,t=o?"scrollLeft":"scrollTop";if(e){let r=e[t],n=()=>{let n=e[t];r!==n&&(u("SCROLL"),d()),r=n};return e.addEventListener("scroll",n),()=>e.removeEventListener("scroll",n)}},[i.viewport,o,u,d]),(0,t.jsx)(j.Presence,{present:s||"hidden"!==c,children:(0,t.jsx)(I,{"data-state":"hidden"===c?"hidden":"visible",...a,ref:n,onPointerEnter:(0,T.composeEventHandlers)(e.onPointerEnter,()=>u("POINTER_ENTER")),onPointerLeave:(0,T.composeEventHandlers)(e.onPointerLeave,()=>u("POINTER_LEAVE"))})})}),U=r.forwardRef((e,n)=>{let l=L(H,e.__scopeScrollArea),{forceMount:s,...a}=e,[i,o]=r.useState(!1),d="horizontal"===e.orientation,c=ea(()=>{if(l.viewport){let e=l.viewport.offsetWidth<l.viewport.scrollWidth,t=l.viewport.offsetHeight<l.viewport.scrollHeight;o(d?e:t)}},10);return ei(l.viewport,c),ei(l.content,c),(0,t.jsx)(j.Presence,{present:s||i,children:(0,t.jsx)(I,{"data-state":i?"visible":"hidden",...a,ref:n})})}),I=r.forwardRef((e,n)=>{let{orientation:l="vertical",...s}=e,a=L(H,e.__scopeScrollArea),i=r.useRef(null),o=r.useRef(0),[d,c]=r.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),u=et(d.viewport,d.content),m={...s,sizes:d,onSizesChange:c,hasThumb:!!(u>0&&u<1),onThumbChange:e=>i.current=e,onThumbPointerUp:()=>o.current=0,onThumbPointerDown:e=>o.current=e};function h(e,t){return function(e,t,r,n="ltr"){let l=er(r),s=t||l/2,a=r.scrollbar.paddingStart+s,i=r.scrollbar.size-r.scrollbar.paddingEnd-(l-s),o=r.content-r.viewport;return el([a,i],"ltr"===n?[0,o]:[-1*o,0])(e)}(e,o.current,d,t)}return"horizontal"===l?(0,t.jsx)(B,{...m,ref:n,onThumbPositionChange:()=>{if(a.viewport&&i.current){let e=en(a.viewport.scrollLeft,d,a.dir);i.current.style.transform=`translate3d(${e}px, 0, 0)`}},onWheelScroll:e=>{a.viewport&&(a.viewport.scrollLeft=e)},onDragScroll:e=>{a.viewport&&(a.viewport.scrollLeft=h(e,a.dir))}}):"vertical"===l?(0,t.jsx)(O,{...m,ref:n,onThumbPositionChange:()=>{if(a.viewport&&i.current){let e=en(a.viewport.scrollTop,d);i.current.style.transform=`translate3d(0, ${e}px, 0)`}},onWheelScroll:e=>{a.viewport&&(a.viewport.scrollTop=e)},onDragScroll:e=>{a.viewport&&(a.viewport.scrollTop=h(e))}}):null}),B=r.forwardRef((e,n)=>{let{sizes:l,onSizesChange:s,...a}=e,i=L(H,e.__scopeScrollArea),[o,d]=r.useState(),c=r.useRef(null),u=(0,D.useComposedRefs)(n,c,i.onScrollbarXChange);return r.useEffect(()=>{c.current&&d(getComputedStyle(c.current))},[c]),(0,t.jsx)(V,{"data-orientation":"horizontal",...a,ref:u,sizes:l,style:{bottom:0,left:"rtl"===i.dir?"var(--radix-scroll-area-corner-width)":0,right:"ltr"===i.dir?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":er(l)+"px",...e.style},onThumbPointerDown:t=>e.onThumbPointerDown(t.x),onDragScroll:t=>e.onDragScroll(t.x),onWheelScroll:(t,r)=>{if(i.viewport){var n,l;let s=i.viewport.scrollLeft+t.deltaX;e.onWheelScroll(s),n=s,l=r,n>0&&n<l&&t.preventDefault()}},onResize:()=>{c.current&&i.viewport&&o&&s({content:i.viewport.scrollWidth,viewport:i.viewport.offsetWidth,scrollbar:{size:c.current.clientWidth,paddingStart:ee(o.paddingLeft),paddingEnd:ee(o.paddingRight)}})}})}),O=r.forwardRef((e,n)=>{let{sizes:l,onSizesChange:s,...a}=e,i=L(H,e.__scopeScrollArea),[o,d]=r.useState(),c=r.useRef(null),u=(0,D.useComposedRefs)(n,c,i.onScrollbarYChange);return r.useEffect(()=>{c.current&&d(getComputedStyle(c.current))},[c]),(0,t.jsx)(V,{"data-orientation":"vertical",...a,ref:u,sizes:l,style:{top:0,right:"ltr"===i.dir?0:void 0,left:"rtl"===i.dir?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":er(l)+"px",...e.style},onThumbPointerDown:t=>e.onThumbPointerDown(t.y),onDragScroll:t=>e.onDragScroll(t.y),onWheelScroll:(t,r)=>{if(i.viewport){var n,l;let s=i.viewport.scrollTop+t.deltaY;e.onWheelScroll(s),n=s,l=r,n>0&&n<l&&t.preventDefault()}},onResize:()=>{c.current&&i.viewport&&o&&s({content:i.viewport.scrollHeight,viewport:i.viewport.offsetHeight,scrollbar:{size:c.current.clientHeight,paddingStart:ee(o.paddingTop),paddingEnd:ee(o.paddingBottom)}})}})}),[W,X]=R(H),V=r.forwardRef((e,n)=>{let{__scopeScrollArea:l,sizes:s,hasThumb:a,onThumbChange:i,onThumbPointerUp:o,onThumbPointerDown:d,onThumbPositionChange:c,onDragScroll:u,onWheelScroll:m,onResize:h,...g}=e,p=L(H,l),[x,f]=r.useState(null),v=(0,D.useComposedRefs)(n,e=>f(e)),w=r.useRef(null),j=r.useRef(""),y=p.viewport,C=s.content-s.viewport,S=(0,N.useCallbackRef)(m),_=(0,N.useCallbackRef)(c),E=ea(h,10);function R(e){w.current&&u({x:e.clientX-w.current.left,y:e.clientY-w.current.top})}return r.useEffect(()=>{let e=e=>{let t=e.target;x?.contains(t)&&S(e,C)};return document.addEventListener("wheel",e,{passive:!1}),()=>document.removeEventListener("wheel",e,{passive:!1})},[y,x,C,S]),r.useEffect(_,[s,_]),ei(x,E),ei(p.content,E),(0,t.jsx)(W,{scope:l,scrollbar:x,hasThumb:a,onThumbChange:(0,N.useCallbackRef)(i),onThumbPointerUp:(0,N.useCallbackRef)(o),onThumbPositionChange:_,onThumbPointerDown:(0,N.useCallbackRef)(d),children:(0,t.jsx)(b.Primitive.div,{...g,ref:v,style:{position:"absolute",...g.style},onPointerDown:(0,T.composeEventHandlers)(e.onPointerDown,e=>{0===e.button&&(e.target.setPointerCapture(e.pointerId),w.current=x.getBoundingClientRect(),j.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",p.viewport&&(p.viewport.style.scrollBehavior="auto"),R(e))}),onPointerMove:(0,T.composeEventHandlers)(e.onPointerMove,R),onPointerUp:(0,T.composeEventHandlers)(e.onPointerUp,e=>{let t=e.target;t.hasPointerCapture(e.pointerId)&&t.releasePointerCapture(e.pointerId),document.body.style.webkitUserSelect=j.current,p.viewport&&(p.viewport.style.scrollBehavior=""),w.current=null})})})}),K="ScrollAreaThumb",q=r.forwardRef((e,r)=>{let{forceMount:n,...l}=e,s=X(K,e.__scopeScrollArea);return(0,t.jsx)(j.Presence,{present:n||s.hasThumb,children:(0,t.jsx)(Z,{ref:r,...l})})}),Z=r.forwardRef((e,n)=>{let{__scopeScrollArea:l,style:s,...a}=e,i=L(K,l),o=X(K,l),{onThumbPositionChange:d}=o,c=(0,D.useComposedRefs)(n,e=>o.onThumbChange(e)),u=r.useRef(void 0),m=ea(()=>{u.current&&(u.current(),u.current=void 0)},100);return r.useEffect(()=>{let e=i.viewport;if(e){let t=()=>{m(),u.current||(u.current=es(e,d),d())};return d(),e.addEventListener("scroll",t),()=>e.removeEventListener("scroll",t)}},[i.viewport,m,d]),(0,t.jsx)(b.Primitive.div,{"data-state":o.hasThumb?"visible":"hidden",...a,ref:c,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...s},onPointerDownCapture:(0,T.composeEventHandlers)(e.onPointerDownCapture,e=>{let t=e.target.getBoundingClientRect(),r=e.clientX-t.left,n=e.clientY-t.top;o.onThumbPointerDown({x:r,y:n})}),onPointerUp:(0,T.composeEventHandlers)(e.onPointerUp,o.onThumbPointerUp)})});q.displayName=K;var G="ScrollAreaCorner",J=r.forwardRef((e,r)=>{let n=L(G,e.__scopeScrollArea),l=!!(n.scrollbarX&&n.scrollbarY);return"scroll"!==n.type&&l?(0,t.jsx)(Q,{...e,ref:r}):null});J.displayName=G;var Q=r.forwardRef((e,n)=>{let{__scopeScrollArea:l,...s}=e,a=L(G,l),[i,o]=r.useState(0),[d,c]=r.useState(0),u=!!(i&&d);return ei(a.scrollbarX,()=>{let e=a.scrollbarX?.offsetHeight||0;a.onCornerHeightChange(e),c(e)}),ei(a.scrollbarY,()=>{let e=a.scrollbarY?.offsetWidth||0;a.onCornerWidthChange(e),o(e)}),u?(0,t.jsx)(b.Primitive.div,{...s,ref:n,style:{width:i,height:d,position:"absolute",right:"ltr"===a.dir?0:void 0,left:"rtl"===a.dir?0:void 0,bottom:0,...e.style}}):null});function ee(e){return e?parseInt(e,10):0}function et(e,t){let r=e/t;return isNaN(r)?0:r}function er(e){let t=et(e.viewport,e.content),r=e.scrollbar.paddingStart+e.scrollbar.paddingEnd;return Math.max((e.scrollbar.size-r)*t,18)}function en(e,t,r="ltr"){let n=er(t),l=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,s=t.scrollbar.size-l,a=t.content-t.viewport,i=(0,_.clamp)(e,"ltr"===r?[0,a]:[-1*a,0]);return el([0,a],[0,s-n])(i)}function el(e,t){return r=>{if(e[0]===e[1]||t[0]===t[1])return t[0];let n=(t[1]-t[0])/(e[1]-e[0]);return t[0]+n*(r-e[0])}}var es=(e,t=()=>{})=>{let r={left:e.scrollLeft,top:e.scrollTop},n=0;return!function l(){let s={left:e.scrollLeft,top:e.scrollTop},a=r.left!==s.left,i=r.top!==s.top;(a||i)&&t(),r=s,n=window.requestAnimationFrame(l)}(),()=>window.cancelAnimationFrame(n)};function ea(e,t){let n=(0,N.useCallbackRef)(e),l=r.useRef(0);return r.useEffect(()=>()=>window.clearTimeout(l.current),[]),r.useCallback(()=>{window.clearTimeout(l.current),l.current=window.setTimeout(n,t)},[n,t])}function ei(e,t){let r=(0,N.useCallbackRef)(t);(0,S.useLayoutEffect)(()=>{let t=0;if(e){let n=new ResizeObserver(()=>{cancelAnimationFrame(t),t=window.requestAnimationFrame(r)});return n.observe(e),()=>{window.cancelAnimationFrame(t),n.unobserve(e)}}},[e,r])}var eo=e.i(52236);let ed=r.forwardRef(({className:e,children:r,...n},l)=>(0,t.jsxs)(A,{ref:l,className:(0,eo.cn)("relative overflow-hidden",e),...n,children:[(0,t.jsx)($,{className:"h-full w-full rounded-[inherit]",children:r}),(0,t.jsx)(ec,{}),(0,t.jsx)(J,{})]}));ed.displayName=A.displayName;let ec=r.forwardRef(({className:e,orientation:r="vertical",...n},l)=>(0,t.jsx)(z,{ref:l,orientation:r,className:(0,eo.cn)("flex touch-none select-none transition-colors","vertical"===r&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===r&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",e),...n,children:(0,t.jsx)(q,{className:"relative flex-1 rounded-full bg-border"})}));ec.displayName=z.displayName;let eu={scheduled:"bg-blue-100 border-blue-300 text-blue-800 hover:bg-blue-200",confirmed:"bg-green-100 border-green-300 text-green-800 hover:bg-green-200",completed:"bg-gray-100 border-gray-300 text-gray-800 hover:bg-gray-200",cancelled:"bg-red-100 border-red-300 text-red-800 hover:bg-red-200",no_show:"bg-orange-100 border-orange-300 text-orange-800 hover:bg-orange-200"};function em({appointments:e,employees:r,currentDate:n,onAppointmentClick:l}){let a=e.filter(e=>{let t=new Date(e.start_time);return t.getDate()===n.getDate()&&t.getMonth()===n.getMonth()&&t.getFullYear()===n.getFullYear()}),i=[...r,{id:"unassigned",first_name:"Nicht",last_name:"zugewiesen",role:"",specialties:[],is_active:!0,work_schedule:{}}],o=Array.from({length:13},(e,t)=>t+8);return(0,t.jsx)(s.Card,{children:(0,t.jsx)(s.CardContent,{className:"p-0",children:(0,t.jsxs)(ed,{className:"w-full",children:[(0,t.jsxs)("div",{className:"flex min-w-max",children:[(0,t.jsxs)("div",{className:"w-20 flex-shrink-0 border-r bg-muted/30 sticky left-0 z-10",children:[(0,t.jsx)("div",{className:"h-16 border-b flex items-center justify-center text-sm font-medium text-muted-foreground bg-muted/50",children:"Zeit"}),o.map(e=>(0,t.jsxs)("div",{className:"h-20 border-b px-2 py-1 text-xs text-muted-foreground bg-muted/30",children:[e,":00"]},e))]}),i.map(e=>{var r,s;let i,d="unassigned"===(r=e.id)?a.filter(e=>!e.employee_id):a.filter(e=>e.employee_id===r),c="unassigned"!==e.id?(s=e,i=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"][n.getDay()],s.work_schedule?.[i]||null):null,g="unassigned"===e.id||null!==c;return(0,t.jsxs)("div",{className:"flex-shrink-0 border-r",style:{width:"200px"},children:[(0,t.jsx)("div",{className:`h-16 border-b px-3 py-2 ${"unassigned"===e.id?"bg-muted/50":"bg-primary/5"}`,children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(h.UserCircle,{className:`w-8 h-8 ${"unassigned"===e.id?"text-muted-foreground":"text-primary"}`}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("p",{className:"font-medium text-sm",children:[e.first_name," ",e.last_name]}),c&&(0,t.jsxs)("p",{className:"text-xs text-muted-foreground",children:[c.start," - ",c.end]}),"unassigned"!==e.id&&!c&&(0,t.jsx)("p",{className:"text-xs text-orange-600",children:"Frei"})]})]})}),(0,t.jsxs)("div",{className:"relative",style:{height:`${80*o.length}px`},children:[o.map((e,r)=>(0,t.jsx)("div",{className:`absolute w-full border-b ${!g?"bg-muted/20":""}`,style:{top:`${80*r}px`,height:"80px"}},e)),c&&(0,t.jsx)("div",{className:"absolute w-full bg-primary/5 border-l-2 border-primary/20",style:{top:`${(parseInt(c.start.split(":")[0])-8)*80}px`,height:`${(parseInt(c.end.split(":")[0])-parseInt(c.start.split(":")[0]))*80}px`}}),d.map(e=>{var r,n;let s,a,i;return(0,t.jsxs)("div",{onClick:()=>l?.(e),className:`absolute rounded-lg border-l-4 p-2 shadow-sm cursor-pointer transition-all overflow-hidden ${eu[e.status]||eu.scheduled}`,style:{top:`${(a=(s=new Date(e.start_time)).getHours(),((a-8)*60+s.getMinutes())/60*80)}px`,minHeight:`${Math.max((r=e.start_time,n=e.end_time,i=new Date(r),(new Date(n).getTime()-i.getTime())/1e3/60/60*80),60)}px`,left:"4px",right:"4px",width:"calc(100% - 8px)"},children:[(0,t.jsxs)("div",{className:"font-semibold text-xs flex items-center gap-1",children:[(0,t.jsx)(m.Clock,{className:"w-3 h-3"}),new Date(e.start_time).toLocaleTimeString("de-DE",{hour:"2-digit",minute:"2-digit"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-1 mt-0.5",children:[(0,t.jsx)(u.User,{className:"w-3 h-3"}),(0,t.jsxs)("span",{className:"text-xs truncate",children:[e.customers.first_name," ",e.customers.last_name]})]}),(0,t.jsx)("div",{className:"text-xs mt-0.5 opacity-75 truncate",children:e.services.name}),"confirmed"===e.customer_response&&(0,t.jsx)("div",{className:"text-xs mt-0.5 font-semibold",children:"✓"})]},e.id)})]})]},e.id)})]}),(0,t.jsx)(ec,{orientation:"horizontal"})]})})})}var eh=e.i(7053);function eg({initialAppointments:e,customers:m,services:h,employees:g}){let x=(0,n.useRouter)(),[v,b]=(0,r.useState)("day"),[j,y]=(0,r.useState)(new Date),[D,N]=(0,r.useState)(null),[C,S]=(0,r.useState)(!1),[_,T]=(0,r.useState)("all"),E=(0,r.useMemo)(()=>"all"===_?e:"unassigned"===_?e.filter(e=>!e.employee_id):e.filter(e=>e.employee_id===_),[e,_]),R=e=>{N(e),S(!0)};return(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)(s.Card,{className:"p-4",children:(0,t.jsxs)("div",{className:"flex flex-col lg:flex-row items-start lg:items-center justify-between gap-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(l.Button,{variant:"outline",size:"sm",onClick:()=>{let e=new Date(j);"day"===v?e.setDate(e.getDate()-1):"week"===v?e.setDate(e.getDate()-7):e.setMonth(e.getMonth()-1),y(e)},children:(0,t.jsx)(i,{className:"w-4 h-4"})}),(0,t.jsx)("div",{className:"min-w-[200px] text-center",children:(0,t.jsx)("h3",{className:"font-semibold text-sm sm:text-base",children:(()=>{if("day"===v)return j.toLocaleDateString("de-DE",{weekday:"long",year:"numeric",month:"long",day:"numeric"});if("week"!==v)return j.toLocaleDateString("de-DE",{year:"numeric",month:"long"});{let e=new Date(j);e.setDate(j.getDate()-j.getDay()+1);let t=new Date(e);return t.setDate(e.getDate()+6),`${e.toLocaleDateString("de-DE",{day:"numeric",month:"short"})} - ${t.toLocaleDateString("de-DE",{day:"numeric",month:"short",year:"numeric"})}`}})()})}),(0,t.jsx)(l.Button,{variant:"outline",size:"sm",onClick:()=>{let e=new Date(j);"day"===v?e.setDate(e.getDate()+1):"week"===v?e.setDate(e.getDate()+7):e.setMonth(e.getMonth()+1),y(e)},children:(0,t.jsx)(o.ChevronRight,{className:"w-4 h-4"})}),(0,t.jsxs)(l.Button,{variant:"outline",size:"sm",onClick:()=>{y(new Date)},children:[(0,t.jsx)(d.Calendar,{className:"w-4 h-4 sm:mr-2"}),(0,t.jsx)("span",{className:"hidden sm:inline",children:"Heute"})]})]}),(0,t.jsxs)("div",{className:"flex flex-wrap items-center gap-3",children:["resource"!==v&&(0,t.jsxs)(a.Select,{value:_,onValueChange:T,children:[(0,t.jsxs)(a.SelectTrigger,{className:"w-[180px]",children:[(0,t.jsx)(u.User,{className:"w-4 h-4 mr-2"}),(0,t.jsx)(a.SelectValue,{placeholder:"Mitarbeiter"})]}),(0,t.jsxs)(a.SelectContent,{children:[(0,t.jsx)(a.SelectItem,{value:"all",children:"Alle Mitarbeiter"}),(0,t.jsx)(a.SelectItem,{value:"unassigned",children:"Nicht zugewiesen"}),g.map(e=>(0,t.jsxs)(a.SelectItem,{value:e.id,children:[e.first_name," ",e.last_name]},e.id))]})]}),(0,t.jsxs)("div",{className:"flex gap-1",children:[(0,t.jsx)(l.Button,{variant:"day"===v?"default":"outline",size:"sm",onClick:()=>b("day"),children:"Tag"}),(0,t.jsx)(l.Button,{variant:"week"===v?"default":"outline",size:"sm",onClick:()=>b("week"),children:"Woche"}),(0,t.jsx)(l.Button,{variant:"month"===v?"default":"outline",size:"sm",onClick:()=>b("month"),children:"Monat"}),(0,t.jsx)(l.Button,{variant:"resource"===v?"default":"outline",size:"sm",onClick:()=>b("resource"),title:"Mitarbeiter-Spalten",children:(0,t.jsx)(c.Users,{className:"w-4 h-4"})})]})]})]})}),"day"===v&&(0,t.jsx)(p,{appointments:E,currentDate:j,onAppointmentClick:R}),"week"===v&&(0,t.jsx)(f,{appointments:E,currentDate:j,onAppointmentClick:R}),"month"===v&&(0,t.jsx)(w,{appointments:E,currentDate:j}),"resource"===v&&(0,t.jsx)(em,{appointments:e,employees:g,currentDate:j,onAppointmentClick:R}),(0,t.jsx)(eh.AppointmentDialog,{open:C,onOpenChange:()=>{S(!1),N(null),x.refresh()},appointment:D,customers:m,services:h,employees:g,existingAppointments:e.map(e=>({id:e.id,employee_id:e.employee_id,start_time:e.start_time,end_time:e.end_time,status:e.status}))})]})}e.s(["CalendarView",()=>eg],26398)}]);